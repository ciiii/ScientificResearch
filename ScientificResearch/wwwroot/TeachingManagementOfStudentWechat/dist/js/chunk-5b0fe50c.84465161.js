(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5b0fe50c"],{"3b35":function(e,t,a){},"92d9":function(e,t,a){"use strict";a.d(t,"b",function(){return r}),a.d(t,"a",function(){return o}),a.d(t,"c",function(){return i}),a.d(t,"f",function(){return c}),a.d(t,"g",function(){return s}),a.d(t,"d",function(){return u}),a.d(t,"e",function(){return l});var n=a("66df"),r=function(e){var t=e.index,a=e.size,r=e.name,o=e.StateName,i=e.type,c="";switch(i){case 1:c="/TeachingManagementOfStudent/WorkFlow/学员分页查看请假申请";break;case 2:c="/TeachingManagementOfStudent/WorkFlow/学员分页查看出科申请";break;case 3:c="/TeachingManagementOfStudent/WorkFlow/学员分页查看轮转手册申请";break;case 4:c="/TeachingManagementOfStudent/WorkFlow/学员分页查看结业申请";break;default:c="/TeachingManagementOfStudent/HomePage/分页获取待办事宜";break}var s={Index:t,Size:a,OrderType:!1,"Like姓名":r,StateName:o};return n["a"].request({url:c,params:s,method:"GET"})},o=function(e){var t=e.id,a=e.type,r="",o="";switch(a){case 1:r="/TeachingManagementOfStudent/WorkFlow/获取请假详情",o="请假编号";break;case 2:r="/TeachingManagementOfStudent/WorkFlow/获取出科详情",o="出科编号";break;case 3:r="/TeachingManagementOfStudent/WorkFlow/获取轮转手册详情",o="轮转手册编号";break;case 4:r="/TeachingManagementOfStudent/WorkFlow/获取结业详情",o="结业编号";break;default:r="";break}var i={};return i[o]=t,n["a"].request({url:r,params:i,method:"GET"})},i=function(e){var t=e.id,a="/TeachingManagementOfStudent/WorkFlow/获取某流程审核记录",r={"流程编号":t};return n["a"].request({url:a,params:r,method:"GET"})},c=function(e){var t=e.type,a=e.Data,r="";switch(t){case 1:r="/TeachingManagementOfStudent/WorkFlow/学员发起请假申请";break;case 2:r="/TeachingManagementOfStudent/WorkFlow/学员发起出科申请";break;case 3:r="/TeachingManagementOfStudent/WorkFlow/学员发起轮转手册申请";break;case 4:r="/TeachingManagementOfStudent/WorkFlow/学员发起结业申请";break}var o={IsHold:!1,Data:a};return n["a"].request({url:r,data:o,method:"POST"})},s=function(e){var t=new FormData;t.append("file",e);var a={"Content-Type":"multipart/form-data"};return n["a"].request({url:"/TeachingManagementOfStudent/WorkFlow/上传教学轮转手册附件",data:t,headers:a,method:"POST"})},u=function(e){var t=e.教学轮转编号,a=e.教学轮转手册类型编号,r=e.教学专业科室任务类型编号,o={"教学轮转编号":t,"教学轮转手册类型编号":a,"教学专业科室任务类型编号":r};return n["a"].request({url:"/TeachingManagementOfStudent/WorkFlow/获取某教学轮转手册可选任务",params:o,method:"GET"})},l=function(){return n["a"].request({url:"/TeachingManagementOfStudent/WorkFlow/获取教学轮转手册类型",method:"GET"})}},adf0:function(e,t,a){"use strict";a.r(t);var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("navbar",{attrs:{path:e.path}}),a("div",{staticClass:"detail"},[a("van-cell-group",[e.rotaryManualTypes.length>0?a("select-picker",{attrs:{label:"类型",data:e.rotaryManualTypes,required:!0},model:{value:e.form.轮转手册.教学轮转手册类型编号,callback:function(t){e.$set(e.form.轮转手册,"教学轮转手册类型编号",t)},expression:"form.轮转手册.教学轮转手册类型编号"}}):e._e(),e.TeacherRoomTaskType.length>0?a("select-picker",{attrs:{label:"任务类型",data:e.TeacherRoomTaskType,required:!0},model:{value:e.form.轮转手册.教学专业科室任务类型编号,callback:function(t){e.$set(e.form.轮转手册,"教学专业科室任务类型编号",t)},expression:"form.轮转手册.教学专业科室任务类型编号"}}):e._e(),a("date-time",{attrs:{required:!0,type:"date",label:"操作时间:"},model:{value:e.form.轮转手册.操作时间,callback:function(t){e.$set(e.form.轮转手册,"操作时间",t)},expression:"form.轮转手册.操作时间"}}),a("select-patient",{attrs:{label:"选择病人",mine:!0,required:!0},model:{value:e.form.轮转手册.病人编号,callback:function(t){e.$set(e.form.轮转手册,"病人编号",t)},expression:"form.轮转手册.病人编号"}}),a("van-field",{attrs:{label:"概要",type:"textarea",placeholder:"请输入概要",rows:"1",autosize:"",required:""},model:{value:e.form.轮转手册.概要,callback:function(t){e.$set(e.form.轮转手册,"概要",t)},expression:"form.轮转手册.概要"}}),a("van-field",{attrs:{label:"内容",type:"textarea",placeholder:"请输入内容",rows:"1",autosize:"",required:""},model:{value:e.form.轮转手册.内容,callback:function(t){e.$set(e.form.轮转手册,"内容",t)},expression:"form.轮转手册.内容"}}),a("van-field",{attrs:{label:"备注",type:"textarea",placeholder:"请输入备注",rows:"1",autosize:""},model:{value:e.form.轮转手册.备注,callback:function(t){e.$set(e.form.轮转手册,"备注",t)},expression:"form.轮转手册.备注"}}),a("van-uploader",{attrs:{"after-read":e.uploadAttachment,multiple:"","upload-text":"上传附件"},model:{value:e.fileList,callback:function(t){e.fileList=t},expression:"fileList"}})],1),e.checkTask.length>0?a("van-cell-group",{attrs:{title:"已完成任务"}},[a("van-checkbox-group",{model:{value:e.taskItem,callback:function(t){e.taskItem=t},expression:"taskItem"}},[a("van-cell-group",e._l(e.checkTask,function(t,n){return a("van-cell",{key:t.编号,attrs:{clickable:"",title:t.项目名称},on:{click:function(t){return e.toggle(n)}}},[a("van-checkbox",{ref:"checkboxes",refInFor:!0,attrs:{slot:"right-icon",name:t},slot:"right-icon"})],1)}),1)],1)],1):e._e()],1),a("div",{staticClass:"btns"},[a("van-button",{attrs:{size:"large",type:"primary"},on:{click:e.submit}},[e._v("提 交")])],1)],1)},o=[],i=(a("2338"),a("fb37"),a("f763"),a("a506")),c=(a("44c0"),a("0afd")),s=a("9ca6"),u=Object(c["a"])("checkbox-group"),l=u[0],f=u[1],h=l({mixins:[Object(s["b"])("vanCheckbox")],props:{max:Number,disabled:Boolean,value:{type:Array,default:function(){return[]}}},watch:{value:function(e){this.$emit("change",e)}},render:function(){var e=arguments[0];return e("div",{class:f()},[this.slots()])}}),m=(a("22b4"),a("3b35"),a("0195")),d=Object(c["a"])("checkbox"),p=d[0],b=d[1],k=p({mixins:[Object(m["a"])({bem:b,role:"checkbox",parent:"vanCheckbox"})],computed:{checked:{get:function(){return this.parent?-1!==this.parent.value.indexOf(this.name):this.value},set:function(e){this.parent?this.setParentValue(e):this.$emit("input",e)}}},watch:{value:function(e){this.$emit("change",e)}},methods:{toggle:function(){var e=this,t=!this.checked;clearTimeout(this.toggleTask),this.toggleTask=setTimeout(function(){e.checked=t})},setParentValue:function(e){var t=this.parent,a=t.value.slice();if(e){if(t.max&&a.length>=t.max)return;-1===a.indexOf(this.name)&&(a.push(this.name),t.$emit("input",a))}else{var n=a.indexOf(this.name);-1!==n&&(a.splice(n,1),t.$emit("input",a))}}}}),g=(a("9ed6"),a("2794")),v=(a("0f0c"),a("3607")),T=a("9d8d"),O=a("5dee"),y=a("e3db"),w=a("591a"),x=a("e1d4"),S=a("785a"),j=a("92d9");function M(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function $(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?M(a,!0).forEach(function(t){Object(i["a"])(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):M(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var F={components:(n={},Object(i["a"])(n,v["a"].name,v["a"]),Object(i["a"])(n,g["a"].name,g["a"]),Object(i["a"])(n,k.name,k),Object(i["a"])(n,h.name,h),Object(i["a"])(n,"navbar",T["a"]),Object(i["a"])(n,"DateTime",O["a"]),Object(i["a"])(n,"SelectPicker",x["a"]),Object(i["a"])(n,"SelectPatient",y["a"]),n),data:function(){return{title:"",fileList:[],form:{"轮转手册":{"编号":0,"教学轮转编号":0,"教学轮转手册类型编号":0,"教学专业科室任务类型编号":0,"操作时间":(new Date).format("yyyy-MM-dd HH:mm:ss"),"病人编号":0,"概要":"","内容":"","附件":"","建立时间":(new Date).format("yyyy-MM-dd HH:mm:ss"),"备注":""},"完成任务编号列表":[]},taskItem:[],rotaryManualTypes:[],TeacherRoomTaskType:[],checkTask:[],TrainingSituation:{},path:"/rotaryManual"}},watch:{"form.轮转手册.教学轮转手册类型编号":{handler:function(){this.GetTask()}},"form.轮转手册.教学专业科室任务类型编号":{handler:function(){this.GetTask()}}},computed:{id:function(){return this.$route.query.id},days:function(){var e="";return this.form.请假结束日期&&this.form.请假开始日期&&(e=new Date(this.form.请假开始日期).DateDiff(new Date(this.form.请假结束日期))),e}},mounted:function(){var e="",t=this;this.form.编号=this.id,this.form.编号?this.title="修改轮转手册":this.title="添加轮转手册",localStorage.getItem("TrainingSituation")&&(this.TrainingSituation=JSON.parse(localStorage.getItem("TrainingSituation")),this.form.轮转手册.教学轮转编号=this.TrainingSituation.当前教学轮转编号),e=this.title,this.setNavTitle({title:e}),this.rotaryManualTypes=[],Object(j["e"])().then(function(e){var a=e.data.data;a.forEach(function(e){t.rotaryManualTypes.push({value:e.编号,text:e.名称})})}),this.TeacherRoomTaskType=[],Object(S["f"])().then(function(e){var a=e.data.data;a.forEach(function(e){t.TeacherRoomTaskType.push({value:e.编号,text:e.名称})})})},methods:$({},Object(w["b"])(["setNavTitle"]),{toggle:function(e){this.$refs.checkboxes[e].toggle()},uploadAttachment:function(e){var t=this;Object(j["g"])(e.file).then(function(a){var n=a.data.data;t.fileList[t.fileList.indexOf(e)].path=n[0]})},GetTask:function(){var e=this;e.form.轮转手册.教学轮转编号&&e.form.轮转手册.教学轮转手册类型编号&&e.form.轮转手册.教学专业科室任务类型编号&&Object(j["d"])(this.form.轮转手册).then(function(t){e.checkTask=t.data.data})},submit:function(){var e=this,t=this;this.form.轮转手册.教学轮转手册类型编号?this.form.轮转手册.教学专业科室任务类型编号?this.form.轮转手册.病人编号?this.form.轮转手册.概要?this.form.轮转手册.内容?(this.form.轮转手册.附件=this.fileList.map(function(e){return e.path}).join(","),this.form.完成任务编号列表=[],this.taskItem.forEach(function(t){e.form.完成任务编号列表.push(t.编号)}),Object(j["f"])({type:3,Data:this.form}).then(function(a){a.error||(e.$toast.success("操作成功"),t.$router.push({path:e.path}))})):this.$toast("内容不能为空!"):this.$toast("概要不能为空!"):this.$toast("请选择病人!"):this.$toast("请选择任务类型!"):this.$toast("请选择类型!")}})},W=F,D=(a("cb49"),a("6691")),P=Object(D["a"])(W,r,o,!1,null,null,null);t["default"]=P.exports},b211:function(e,t,a){},cb49:function(e,t,a){"use strict";var n=a("b211"),r=a.n(n);r.a}}]);