(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a12c8fd"],{"0fed":function(t,s,n){},"19f8":function(t,s,n){"use strict";var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("van-panel",{staticClass:"box",attrs:{title:"审核"}},[n("i",{staticClass:"icon iconfont icon-guanbi",on:{click:t.back}}),n("van-cell-group",[n("van-field",{attrs:{label:"审核说明：",type:"textarea",placeholder:"请输入审核说明···",rows:"5",autosize:t.maxHeight},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),n("div",{staticClass:"btn"},[n("van-button",{attrs:{type:"primary",size:"small"},on:{click:t.pass}},[t._v("通过")]),n("van-button",{attrs:{type:"warning",size:"small"},on:{click:t.fail}},[t._v("不通过")]),n("van-button",{attrs:{type:"danger",size:"small"},on:{click:t.termination}},[t._v("终止")])],1)],1)],1)},i=[],a={props:["message"],data:function(){return{value:"",maxHeight:{maxHeight:90},state:{pass:1,fail:-1,termination:-2}}},mounted:function(){},methods:{back:function(){this.$emit("getMessage"),this.value=""},pass:function(){var t=this;console.log(this.message,"通过");var s={"步骤编号":this.message.步骤编号,"状态值":this.state.pass,"备注":this.value};this.$http.auditStep(s).then(function(s){console.log(s,"1111111111111122222222"),s.error?t.$toast({duration:1500,message:s.error}):(t.$toast.success({duration:1500,message:"操作成功！"}),t.$emit("getBacklog"))}),this.back()},fail:function(){var t=this,s={"步骤编号":this.message.步骤编号,"状态值":this.state.fail,"备注":this.value};this.$http.auditStep(s).then(function(s){s.error?t.$toast({duration:1500,message:s.error}):(t.$toast.success({duration:1500,message:"操作成功！"}),t.$emit("getBacklog"))}),this.back()},termination:function(){var t=this,s={"步骤编号":this.message.步骤编号,"状态值":this.state.termination,"备注":this.value};this.$http.auditStep(s).then(function(s){s.error?t.$toast({duration:1500,message:s.error}):(t.$toast.success({duration:1500,message:"操作成功！"}),t.$emit("getBacklog"))}),this.back()}}},o=a,c=(n("5e0a"),n("2877")),l=Object(c["a"])(o,e,i,!1,null,"d85fd13e",null);l.options.__file="audit.vue";s["a"]=l.exports},"1c9b":function(t,s,n){},"1e4b":function(t,s,n){"use strict";n.r(s);var e=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("search"),n("section",[n("div",{staticClass:"backlogBox"},[n("div",{staticClass:"backlog"},[t._m(0),n("span",{on:{click:t.more}},[t._v("\n          更多\n          "),n("i",{staticClass:"icon iconfont icon-you"})])]),n("van-swipe",{staticClass:"backlogContent",attrs:{autoplay:3e3,vertical:"","show-indicators":!1}},t._l(t.KYList,function(s,e){return n("van-swipe-item",{key:e},[n("span",{on:{click:function(n){t.newsItem(s.编号)}}},[n("i",{staticClass:"iocn iconfont icon-tongzhi"}),t._v("\n            "+t._s(s.通知名称)+"\n          ")])])}),1)],1),t._m(1),n("div",{staticClass:"backlogBox"},[t._m(2),n("toDoList",{ref:"toDoList"})],1)]),n("navFooter")],1)},i=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("span",[n("i",{staticClass:"icon iconfont icon-tongzhi1"}),n("span",[t._v("通知公告")])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"box"},[n("div",[n("div",{staticClass:"boxI"},[n("i",{staticClass:"iocn iconfont icon-diyiming"})]),n("div",{staticClass:"boxContent"},[n("p",[t._v("第一作者")]),n("span",[t._v("10")])])]),n("div",[n("div",{staticClass:"boxI"},[n("i",{staticClass:"iocn iconfont icon-xiangmu1"})]),n("div",{staticClass:"boxContent"},[n("p",[t._v("横项")]),n("span",[t._v("15")])])]),n("div",[n("div",{staticClass:"boxI"},[n("i",{staticClass:"iocn iconfont icon-xiangmu"})]),n("div",{staticClass:"boxContent"},[n("p",[t._v("纵项")]),n("span",[t._v("17")])])]),n("div",[n("div",{staticClass:"boxI"},[n("i",{staticClass:"iocn iconfont icon-feiyong"})]),n("div",{staticClass:"boxContentX"},[n("p",[t._v("费用")]),n("span",[t._v("3728元")])])])])},function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"backlog"},[n("span",[n("i",{staticClass:"icon iconfont icon-liti"}),n("span",[t._v("我的待办")])])])}],a=n("f499"),o=n.n(a),c=(n("3b2b"),n("a481"),n("ac6a"),function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("img",{attrs:{src:n("2949"),alt:"科研logo"}}),t.personnel?t._e():e("span",{on:{click:t.toLogin}},[t._v("登 录")])])}),l=[],r={data:function(){return{personnel:JSON.parse(localStorage.getItem("personnel"))}},computed:{},created:function(){},mounted:function(){},methods:{toLogin:function(){null===this.personnel&&this.$router.push("/guidance")}}},u=r,p=(n("5602"),n("2877")),f=Object(p["a"])(u,c,l,!1,null,"285905de",null);f.options.__file="search.vue";var h=f.exports,d=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s,e){return n("div",{key:e,staticClass:"backContentBox"},[n("div",{staticClass:"bacnButtom"},[n("ul",{on:{click:function(n){t.goDetails(s,s.项目编号)}}},[n("li",[t._v(t._s(s.流程名称))]),n("li",[n("span",[t._v("项目名称：")]),n("span",[t._v(t._s(s.项目名称))])]),n("li",[n("span",[t._v("步骤名称：")]),n("span",[t._v(t._s(s.步骤名称))])]),n("li",[n("span",[t._v("发起人姓名：")]),n("span",[t._v(t._s(s.发起人姓名))])]),n("li",[n("i",{staticClass:"currentState"},[t._v(t._s(s.状态名称))]),n("i",{staticClass:"stepState"},[t._v(t._s(s.步骤状态说明))])]),n("li",{staticClass:"contentSpan"},[n("span",[t._v("当前步骤：")]),n("span",[t._v(t._s(s.步骤名称)+" - "+t._s(s.步骤状态说明))])]),n("li",[n("span",[t._v("创建时间：")]),n("span",[t._v(t._s(t.startTime(s.流程创建时间)))])])]),n("div",{staticClass:"audit"},[n("span",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],on:{click:function(n){t.audit(s)}}},[t._v("审核")])])])])}),n("van-popup",{staticClass:"popup",model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[n("Audit",{attrs:{message:t.message},on:{getMessage:t.getMessage,getBacklog:t.getBacklog}})],1)],2)},v=[],g=n("19f8"),m={components:{Audit:g["a"]},data:function(){return{index:0,size:0,total:0,list:[],loading:!1,finished:!1,show:!1,isShow:!1,message:"",typeList:{"论文成果":"paperDetails","著作成果":"workDetails","专利成果":"patentDetails","获奖成果":"resultsDetails","纵向项目申报":"YDeclarationDetails","纵向项目中检":"YProcessInspectionDetails","纵向项目经费到账":"YFundsToTheAccount","横向项目":"XDetails","横向项目经费到账":"XFundsToTheAccount"}}},mounted:function(){},methods:{getMessage:function(){this.show=!1},getBacklog:function(){var t=this,s={index:this.index+1};this.$http.getBacklogProcess(s).then(function(s){console.log(s,"234"),t.total=s.data.total,t.list=t.list.concat(s.data.list),t.list.forEach(function(s,n){"待审核"===s.步骤状态说明&&(t.isShow=!0)}),t.loading=!1,t.index++,t.index>=t.total&&(t.finished=!0)})},onLoad:function(){var t=this;setTimeout(function(){t.getBacklog()},500)},goDetails:function(t,s){for(var n in this.typeList)n==t.流程名称&&this.$router.push({path:"/".concat(this.typeList[n]),name:"".concat(this.typeList[n]),params:{item:s}})},audit:function(t){this.message=t,this.show=!0},startTime:function(t){if(null!=t)return t.slice(0,10)}}},_=m,b=(n("e91c"),Object(p["a"])(_,d,v,!1,null,"14aca222",null));b.options.__file="toDoList.vue";var k=b.exports,x=n("2c4b"),C={components:{search:h,toDoList:k,navFooter:x["a"]},data:function(){return{isLoading:!1,index:1,size:15,KYList:[]}},mounted:function(){var t=this,s=JSON.parse(localStorage.getItem("personnel")),n={"人员编号":s.编号,index:this.index,size:this.size};this.$http.getToViewNewsList(n).then(function(s){s.data.list.forEach(function(s,n){t.KYList.push(s)})})},methods:{onRefresh:function(){var t=this;setTimeout(function(){t.$refs.toDoList.getBacklog(),t.$toast("刷新成功"),t.isLoading=!1},500)},getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getCodeApi:function(t,s){var n=encodeURIComponent(t),e="snsapi_base",i="wx5e45aca8fcb270f1",a="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(i,"&redirect_uri=").concat(n,"&response_type=code&scope=").concat(e,"&state=").concat(s,"#wechat_redirect");return a},more:function(){this.$router.push("/KYMoreList")},newsItem:function(t){this.$router.push({path:"/KYNewsDetails",name:"KYNewsDetails",params:{item:t}})}},created:function(){var t=this;if(!localStorage.token){var s=this.getUrlKey("code");s?this.$http.LoginWithOpenId(s).then(function(s){console.log(s,"res```````"),localStorage.personnel=o()(s.data.人员),localStorage.token="".concat(s.data.token_type," ").concat(s.data.access_token),console.log(localStorage.token,"localStorage.token  ????????"),t.$refs.toDoList.getBacklog()}):(this.$router.push("/login"),this.$notify("没有权限，请绑定！"))}}},w=C,$=(n("58e8"),Object(p["a"])(w,e,i,!1,null,"ee60d102",null));$.options.__file="index.vue";s["default"]=$.exports},2949:function(t,s,n){t.exports=n.p+"img/homeLogo.ab37f1a1.jpg"},5602:function(t,s,n){"use strict";var e=n("0fed"),i=n.n(e);i.a},"58e8":function(t,s,n){"use strict";var e=n("1c9b"),i=n.n(e);i.a},"5e0a":function(t,s,n){"use strict";var e=n("b5b5"),i=n.n(e);i.a},a21f:function(t,s,n){var e=n("584a"),i=e.JSON||(e.JSON={stringify:JSON.stringify});t.exports=function(t){return i.stringify.apply(i,arguments)}},b5b5:function(t,s,n){},e035:function(t,s,n){},e91c:function(t,s,n){"use strict";var e=n("e035"),i=n.n(e);i.a},f499:function(t,s,n){t.exports=n("a21f")}}]);