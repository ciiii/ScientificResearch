(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5284bdef"],{"5d0c":function(t,e,n){"use strict";var o=n("9694"),i=n.n(o);i.a},"6ce6":function(t,e,n){"use strict";function o(t,e){var n;e=e||200;return function(){var o=this,i=arguments;n&&clearTimeout(n),n=setTimeout(function(){n=null,t.apply(o,i)},e)}}n.d(e,"a",function(){return o})},9694:function(t,e,n){},b263:function(t,e,n){t.exports=n.p+"img/logo.af96feb7.png"},dd7b:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"box"},[n("div",{staticClass:"nav"},[null!=this.Logo?n("img",{attrs:{src:t.url+this.Logo}}):n("img",{attrs:{src:this.defaultImg}})]),n("form",{attrs:{action:"/",onsubmit:"return false"}},[n("div",{staticClass:"input"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.DbKey,expression:"DbKey"}],attrs:{type:"text",placeholder:"医院"},domProps:{value:t.DbKey},on:{input:function(e){e.target.composing||(t.DbKey=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.工号,expression:"工号"}],attrs:{type:"text",placeholder:"工号",maxlength:t.max,minlength:t.min,prop:"工号"},domProps:{value:t.工号},on:{input:function(e){e.target.composing||(t.工号=e.target.value)}}}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.密码,expression:"密码"}],attrs:{type:"password",placeholder:"密码",maxlength:t.max,minlength:t.min,prop:"密码"},domProps:{value:t.密码},on:{input:function(e){e.target.composing||(t.密码=e.target.value)}}})]),n("div",{staticClass:"btn",on:{click:t.bind}},[n("span",[t._v("登 录")])])])])},i=[],a=(n("63ff"),n("e71e")),s=(n("7c56"),n("34a3"),n("6ce6")),r={name:"login",data:function(){return{code:"",max:20,min:3,"工号":null,"密码":null,DbKey:null,Logo:null,url:"",HospitalInformationL:"",defaultImg:n("b263")}},created:function(){this.DbKey=this.getUrlKey("name"),this.getLogo()},mounted:function(){var t=this;this.code=this.getUrlKey("code"),console.log(this.$route),this.code?localStorage.getItem("reset")?localStorage.removeItem("reset"):this.$http.LoginWithOpenId(this.code).then(function(e){e.error||(localStorage.personnel=JSON.stringify(e.data.人员),localStorage.token="".concat(e.data.token_type," ").concat(e.data.access_token),t.HospitalInformation=t.DbKey,t.getLogo(),localStorage.HospitalInformation=JSON.stringify(t.HospitalInformation),localStorage.flag=!1,t.$router.push("/"))}):this.$router.push("/guidance")},methods:{getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getLogo:function(){var t=Object(a["a"])(regeneratorRuntime.mark(function t(){var e,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return e={k:this.DbKey},t.next=3,this.$http.getHospitalInformation(e);case 3:n=t.sent,this.Logo=n.data.Logo,this.HospitalInformation=n.data;case 6:case"end":return t.stop()}},t,this)}));function e(){return t.apply(this,arguments)}return e}(),bind:Object(s["a"])(function(){var t=this;if(null!==this.工号&&null!==this.密码&&null!==this.DbKey)if(this.工号.length<4)this.$notify("工号长度不能少于【4】位");else if(null!=this.密码)if(this.密码.length<3)this.$notify("密码长度不能少于【3】位");else{var e=this.getUrlKey("code");if(this.HospitalInformation=this.DbKey,this.getLogo(),e){var n="演示医院"==this.DbKey?"ScientificResearch_Test":this.DbKey;this.$http.BindOpenId(e,this.工号,this.密码,n).then(function(e){e.error?t.$notify("登录信息有误！"):(localStorage.personnel=JSON.stringify(e.data.人员),localStorage.token="".concat(e.data.token_type," ").concat(e.data.access_token),t.$router.push("/"),localStorage.HospitalInformation=JSON.stringify(t.HospitalInformation),localStorage.flag=!1)})}else this.$notify("请授权后再登录！")}else this.$notify("密码长度不能少于【3】位");else this.$notify("医院 工号 密码 不能为空！")},500)}},l=r,c=(n("5d0c"),n("6691")),u=Object(c["a"])(l,o,i,!1,null,"d9997e02",null);e["default"]=u.exports}}]);
//# sourceMappingURL=chunk-5284bdef.7cf9d678.js.map