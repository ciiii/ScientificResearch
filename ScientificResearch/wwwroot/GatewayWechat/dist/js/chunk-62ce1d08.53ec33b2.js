(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62ce1d08"],{"0496":function(t,s,i){"use strict";var n=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("img",{attrs:{src:i("2949"),alt:"科研logo"}}),n("span",{on:{click:t.toLogin}},[t._v("登 录")])])},a=[],e={data:function(){return{}},methods:{toLogin:function(){var t=JSON.parse(localStorage.getItem("personnel"));null===t?this.$router.push("/login"):this.$toast("您已登录过了耶！")}}},o=e,c=(i("3e71"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"467f95ff",null);l.options.__file="search.vue";s["a"]=l.exports},"0d75":function(t,s,i){"use strict";var n=i("226e"),a=i.n(n);a.a},"19f8":function(t,s,i){"use strict";var n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("van-panel",{staticClass:"box",attrs:{title:"审核"}},[i("i",{staticClass:"icon iconfont icon-guanbi",on:{click:t.back}}),i("van-cell-group",[i("van-field",{attrs:{label:"审核说明：",type:"textarea",placeholder:"请输入审核说明···",rows:"5",autosize:t.maxHeight},model:{value:t.value,callback:function(s){t.value=s},expression:"value"}}),i("div",{staticClass:"btn"},[i("van-button",{attrs:{type:"primary",size:"small"},on:{click:t.pass}},[t._v("通过")]),i("van-button",{attrs:{type:"warning",size:"small"},on:{click:t.fail}},[t._v("不通过")]),i("van-button",{attrs:{type:"danger",size:"small"},on:{click:t.termination}},[t._v("终止")])],1)],1)],1)},a=[],e=(i("cadf"),i("551c"),i("097d"),{props:["message"],data:function(){return{value:"",maxHeight:{maxHeight:90},state:{pass:1,fail:-1,termination:-2}}},mounted:function(){},methods:{back:function(){this.$emit("getMessage"),this.value=""},pass:function(){var t=this,s={"步骤编号":this.message.步骤编号,"状态值":this.state.pass,"备注":this.value};this.$http.auditStep(s).then(function(s){200!=s.status||"OK"!=s.statusText?t.$toast({duration:1500,message:s.error}):t.$toast.success({duration:1500,message:"操作成功！"})}),this.back()},fail:function(){var t=this,s={"步骤编号":this.message.步骤编号,"状态值":this.state.fail,"备注":this.value};this.$http.auditStep(s).then(function(s){200!=s.status||"OK"!=s.statusText?t.$toast({duration:1500,message:s.error}):t.$toast.success({duration:1500,message:"操作成功！"})}),this.back()},termination:function(){var t=this,s={"步骤编号":this.message.步骤编号,"状态值":this.state.termination,"备注":this.value};this.$http.auditStep(s).then(function(s){200!=s.status||"OK"!=s.statusText?t.$toast({duration:1500,message:s.error}):t.$toast.success({duration:1500,message:"操作成功！"})}),this.back()}}}),o=e,c=(i("0d75"),i("2877")),l=Object(c["a"])(o,n,a,!1,null,"346a3803",null);l.options.__file="audit.vue";s["a"]=l.exports},"1e4b":function(t,s,i){"use strict";i.r(s);var n=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("search"),i("section",[i("div",{staticClass:"backlogBox"},[i("div",{staticClass:"backlog"},[t._m(0),i("span",{on:{click:t.more}},[t._v("\n          更多\n          "),i("i",{staticClass:"icon iconfont icon-you"})])]),i("van-swipe",{staticClass:"backlogContent",attrs:{autoplay:3e3,vertical:"","show-indicators":!1}},t._l(t.KYList,function(s,n){return i("van-swipe-item",{key:n},[i("span",{on:{click:function(i){t.newsItem(s.编号)}}},[i("i",{staticClass:"iocn iconfont icon-tongzhi"}),t._v("\n            "+t._s(s.通知名称)+"\n          ")])])}),1)],1),t._m(1),i("div",{staticClass:"backlogBox"},[t._m(2),i("toDoList",{ref:"toDoList"})],1)]),i("navFooter")],1)},a=[function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("span",[i("i",{staticClass:"icon iconfont icon-tongzhi1"}),i("span",[t._v("通知公告")])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"box"},[i("div",[i("div",{staticClass:"boxI"},[i("i",{staticClass:"iocn iconfont icon-diyiming"})]),i("div",{staticClass:"boxContent"},[i("p",[t._v("第一作者")]),i("span",[t._v("10")])])]),i("div",[i("div",{staticClass:"boxI"},[i("i",{staticClass:"iocn iconfont icon-xiangmu1"})]),i("div",{staticClass:"boxContent"},[i("p",[t._v("横项")]),i("span",[t._v("15")])])]),i("div",[i("div",{staticClass:"boxI"},[i("i",{staticClass:"iocn iconfont icon-xiangmu"})]),i("div",{staticClass:"boxContent"},[i("p",[t._v("纵项")]),i("span",[t._v("17")])])]),i("div",[i("div",{staticClass:"boxI"},[i("i",{staticClass:"iocn iconfont icon-feiyong"})]),i("div",{staticClass:"boxContentX"},[i("p",[t._v("费用")]),i("span",[t._v("3728元")])])])])},function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",{staticClass:"backlog"},[i("span",[i("i",{staticClass:"icon iconfont icon-liti"}),i("span",[t._v("我的待办")])])])}],e=i("f499"),o=i.n(e),c=(i("3b2b"),i("a481"),i("ac6a"),i("cadf"),i("551c"),i("097d"),i("0496")),l=function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("van-list",{attrs:{finished:t.finished,"finished-text":"没有更多了"},on:{load:t.onLoad},model:{value:t.loading,callback:function(s){t.loading=s},expression:"loading"}},[t._l(t.list,function(s,n){return i("div",{key:n,staticClass:"backContentBox"},[i("div",{staticClass:"bacnButtom"},[i("ul",{on:{click:function(i){t.goDetails(s,s.项目编号)}}},[i("li",[t._v(t._s(s.流程名称))]),i("li",[i("span",[t._v("项目名称：")]),i("span",[t._v(t._s(s.项目名称))])]),i("li",[i("span",[t._v("步骤名称：")]),i("span",[t._v(t._s(s.步骤名称))])]),i("li",[i("span",[t._v("发起人姓名：")]),i("span",[t._v(t._s(s.发起人姓名))])]),i("li",[i("i",{staticClass:"currentState"},[t._v(t._s(s.状态名称))]),i("i",{staticClass:"stepState"},[t._v(t._s(s.步骤状态说明))])]),i("li",{staticClass:"contentSpan"},[i("span",[t._v("当前步骤：")]),i("span",[t._v(t._s(s.步骤名称)+" - "+t._s(s.步骤状态说明))])]),i("li",[i("span",[t._v("创建时间：")]),i("span",[t._v(t._s(t.startTime(s.流程创建时间)))])])]),i("div",{staticClass:"audit"},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],on:{click:function(i){t.audit(s)}}},[t._v("审核")])])])])}),i("van-popup",{staticClass:"popup",model:{value:t.show,callback:function(s){t.show=s},expression:"show"}},[i("Audit",{attrs:{message:t.message},on:{getMessage:t.getMessage}})],1)],2)},r=[],u=i("19f8"),f={components:{Audit:u["a"]},data:function(){return{index:1,size:15,list:[],loading:!1,finished:!1,show:!1,isShow:!1,message:"",typeList:{"论文成果":"paperDetails","著作成果":"workDetails","专利成果":"patentDetails","获奖成果":"resultsDetails","纵向项目申报":"YDeclarationDetails","纵向项目中检":"YProcessInspectionDetails","纵向项目经费到账":"YFundsToTheAccount","横向项目":"XDetails","横向项目经费到账":"XFundsToTheAccount"}}},mounted:function(){localStorage.token&&this.getBacklog()},methods:{getMessage:function(){this.show=!1},getBacklog:function(){var t=this;this.$http.getBacklogProcess(this.index,this.size).then(function(s){console.log(s,"获取待办流程"),t.list=s.data.list,t.list.forEach(function(s,i){"待审核"===s.步骤状态说明&&(t.isShow=!0)})}).catch(function(t){console.log(t)})},goDetails:function(t,s){for(var i in this.typeList)i==t.流程名称&&this.$router.push({path:"/".concat(this.typeList[i]),name:"".concat(this.typeList[i]),params:{item:s}})},audit:function(t){this.message=t,this.show=!0},onLoad:function(){var t=this;setTimeout(function(){for(var s=0;s<0;s++)t.list.push(t.list.length+1);t.loading=!1,t.list.length>=0&&(t.finished=!0)},500)},startTime:function(t){if(null!=t)return t.slice(0,10)}}},p=f,h=(i("adfb"),i("2877")),v=Object(h["a"])(p,l,r,!1,null,"4a32e240",null);v.options.__file="toDoList.vue";var d=v.exports,g=i("2c4b"),m={components:{search:c["a"],toDoList:d,navFooter:g["a"]},data:function(){return{isLoading:!1,index:1,size:15,KYList:[]}},mounted:function(){var t=this,s=JSON.parse(localStorage.getItem("personnel")),i={"人员编号":s.编号,index:this.index,size:this.size};this.$http.getToViewNewsList(i).then(function(s){s.data.list.forEach(function(s,i){t.KYList.push(s)})})},methods:{onRefresh:function(){var t=this;setTimeout(function(){t.$refs.toDoList.getBacklog(),t.$toast("刷新成功"),t.isLoading=!1},500)},getUrlKey:function(t){return decodeURIComponent((new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(location.href)||[,""])[1].replace(/\+/g,"%20"))||null},getCodeApi:function(t,s){var i=encodeURIComponent(t),n="snsapi_base",a="wx5e45aca8fcb270f1",e="https://open.weixin.qq.com/connect/oauth2/authorize?appid=".concat(a,"&redirect_uri=").concat(i,"&response_type=code&scope=").concat(n,"&state=").concat(s,"#wechat_redirect");return e},more:function(){this.$router.push("/KYMoreList")},newsItem:function(t){this.$router.push({path:"/KYNewsDetails",name:"KYNewsDetails",params:{item:t}})}},created:function(){var t=this;if(document.title="科研管理 - 主页",!localStorage.token){var s=this.getUrlKey("code");s?this.$http.LoginWithOpenId(s).then(function(s){console.log(s,"res```````"),localStorage.personnel=o()(s.data.人员),localStorage.token="".concat(s.data.token_type," ").concat(s.data.access_token),console.log(localStorage.token,"localStorage.token  ????????"),t.$refs.toDoList.getBacklog()}):(this.$router.push("/login"),this.$notify("没有权限，请绑定！"))}}},_=m,b=(i("616a"),Object(h["a"])(_,n,a,!1,null,"4fb20ba4",null));b.options.__file="index.vue";s["default"]=b.exports},"226e":function(t,s,i){},2949:function(t,s,i){t.exports=i.p+"img/homeLogo.ab37f1a1.jpg"},"334e":function(t,s,i){},"3e71":function(t,s,i){"use strict";var n=i("96d1"),a=i.n(n);a.a},5976:function(t,s,i){},"616a":function(t,s,i){"use strict";var n=i("5976"),a=i.n(n);a.a},"96d1":function(t,s,i){},a21f:function(t,s,i){var n=i("584a"),a=n.JSON||(n.JSON={stringify:JSON.stringify});t.exports=function(t){return a.stringify.apply(a,arguments)}},adfb:function(t,s,i){"use strict";var n=i("334e"),a=i.n(n);a.a},f499:function(t,s,i){t.exports=i("a21f")}}]);