(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-7a70"],{"9l42":function(t,e,n){"use strict";n.r(e);var s=n("cLjf"),i=n.n(s),a=n("hDQ3"),o=n.n(a),r=n("YHGi"),l=n("K3Y6"),c={name:"addUser",data:function(){return{item:{},isLoad:!1,listLoading:!0,levels:[],model:{Id:0,List:[]}}},mounted:function(){sessionStorage.getItem("item")&&(this.item=JSON.parse(sessionStorage.getItem("item")),this.model.Id=this.item.编号),this.getAsk(this.item.编号),this.getlevels(),this.isLoad=!0},methods:{cancelHandler:function(){this.$emit("myEvent",!1)},getlevels:function(){var t=o()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(r.f.GET_TEACHING_GRADING_SCALE,"");case 2:(e=t.sent)&&e.length>0&&(this.levels=e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changeLevels:function(t){this.levels.find(function(e,n,s){t.最低评分等级==e.等级名称&&(t.最低评分要求=e.最小分值)})},getAsk:function(){var t=o()(i.a.mark(function t(e){var n,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={"教学专业科室编号":e},t.next=3,this.$http.myGet(r.k.GET_MAJOR_DEPARTMENT_ASK,n);case 3:(s=t.sent)&&s.length>0&&(this.model.List=s),this.listLoading=!1;case 6:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),addData:function(){this.model.List.push({"编号":0,"项目名称":"","说明":"","最低评分等级":"已掌握","最低评分要求":80,"备注":""})},confirmHandler:Object(l.a)(function(){if(0==this.model.List.length)return this.$message.error("至少添加一项要求！"),!1;for(var t=0;t<this.model.List.length;t++)if(!this.model.List[t].项目名称){this.$message.error("第（"+(t+1)+"）行，请输入项目名称！");break}console.info("this.model"),console.info(this.model),this.addOrEditAsk(this.model)},300),addOrEditAsk:function(){var t=o()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(r.k.POST_ADD_EDIT_MAJOR_DEPARTMENT_ASK,e);case 2:this.$message.success("提交成功！"),this.$router.push({path:"/trainingDepartmentSettings"});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},u=(n("ggGY"),n("ZrdR")),d=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoad?n("div",{staticClass:"app-container page-common page-addStudent"},[n("div",{staticClass:"btn-back-box"},[n("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[n("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),t._m(0),t._v(" "),n("div",{staticClass:"title-box"},[n("i",{staticClass:"iconfont iconkeshikucunguanli"}),n("span",[t._v(" "+t._s(t.item.教学专业名称)+" ( "+t._s(t.item.科室名称)+")")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"success"},on:{click:t.addData}},[n("i",{staticClass:"iconfont icontianjia"}),t._v(" 添加要求")])],1),t._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.model.List,border:"",fit:"","highlight-current-row":"",stripe:""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"90",prop:"number"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"项目名称",prop:"项目名称"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"textarea"},model:{value:e.row.项目名称,callback:function(n){t.$set(e.row,"项目名称",n)},expression:"scope.row.项目名称"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"说明",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"textarea"},model:{value:e.row.说明,callback:function(n){t.$set(e.row,"说明",n)},expression:"scope.row.说明"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"最低评分等级",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择"},on:{change:function(n){t.changeLevels(e.row)}},model:{value:e.row.最低评分等级,callback:function(n){t.$set(e.row,"最低评分等级",n)},expression:"scope.row.最低评分等级"}},t._l(t.levels,function(e){return n("el-option",{key:e.编号,attrs:{label:e.等级名称,value:e.等级名称}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.等级名称))]),t._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.最小分值))])])}))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"最低评分值（分）",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.最低评分要求)+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"备注",align:"center",prop:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"textarea"},model:{value:e.row.备注,callback:function(n){t.$set(e.row,"备注",n)},expression:"scope.row.备注"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){t.model.List.splice(e.$index,1)}}},[t._v("删除\n          ")])]}}])})],1)],1),t._v(" "),t.model.List.length>0?n("div",{staticClass:"dialog-footer footer-box",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("提 交")])],1):t._e()]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-set"}),this._v(" 设置科室基本要求：")])}],!1,null,"0e409f95",null);d.options.__file="setAsk.vue";e.default=d.exports},ggGY:function(t,e,n){"use strict";var s=n("kriq");n.n(s).a},kriq:function(t,e,n){}}]);