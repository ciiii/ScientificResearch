(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-6a3d"],{"1HHF":function(t,e,a){},"23DV":function(t,e,a){"use strict";a.r(e);var n=a("cLjf"),i=a.n(n),s=a("hDQ3"),r=a.n(s),o=a("YHGi"),c=a("K3Y6"),l={name:"addEditSignIn",components:{datePicker:a("od/H").a},data:function(){return{objItme:{"编号":0,"考勤日期":"","教学考勤类型编号":0,"说明":"","建立人":0,"建立时间":Object(c.h)(new Date,"yyyy-MM-dd"),"备注":""},form:{Id:"",List:[]},placeholder:{start:"开始日期",end:"结束日期"},newItme:{},types:[],rotationData:{},time:[],list:[],isLoad:!1,Loading:!1,isDialog:!1,listLoading:!1}},mounted:function(){if(localStorage.getItem("userInfo")){var t=Object(c.k)("userInfo").人员;this.form.建立人=t.编号}if(localStorage.getItem("dataItem")){var e=Object(c.k)("dataItem");this.newItme=e.item,this.form.Id=e.item.学员信息.当前教学轮转编号,this.getType(),this.getRotationSignIn(this.form.Id)}},methods:{getType:function(){var t=r()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(o.m.GET_SING_IN_TYPES,"");case 2:(e=t.sent)&&e.length>0?this.types=e.reverse():this.types=[];case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getRotationSignIn:function(){var t=r()(i.a.mark(function t(e){var a,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a={"教学轮转编号":e},t.next=3,this.$http.myGet(o.m.GET_ROTATION_SING_IN,a);case 3:(n=t.sent)?(console.info(n),this.time=[n.教学轮转.实际入科日期,n.教学轮转.计划出科日期],this.rotationData=n,this.getList()):this.time=[];case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),getList:function(){this.list=[],this.getTime(this.time[0],this.time[1]),this.listLoading=!1,this.isLoad=!0},getTime:function(t,e){if(Object(c.r)(t)<=Object(c.r)(e)){var a=void 0;(a=this.rotationData.教学考勤情况列表.find(function(e){if(Object(c.r)(e.考勤日期)==Object(c.r)(t))return e}))||((a=Object(c.g)(this.objItme)).考勤日期=t),this.list.push(a),t=Object(c.b)(t,1)+" 00:00:00",this.getTime(t,e)}},changeTime:function(t){this.time=t},onSearch:function(){Object(c.r)(this.time[0])<Object(c.r)(this.rotationData.教学轮转.实际入科日期)||Object(c.r)(this.time[1])>Object(c.r)(this.rotationData.教学轮转.计划出科日期)?this.$message({showClose:!0,message:"考勤时间必须在【实际入科日期】到【计划出科日期】之内，请选择正确的时间段！",type:"error",duration:5e3}):(this.list=[],this.listLoading=!0,this.getList())},brnFullAttendance:function(){this.list.forEach(function(t){0==t.教学考勤类型编号&&(t.教学考勤类型编号=1)})},getStatesA:function(t){switch(t){case"未报到":return"state-warning";case"退培":return"state-error";case"已报到":return"state-success";case"轮转计划已安排":return"state-primary";case"在培":return"state-success";case"待结业":return"state-warning";case"结业":return"state-success"}},getStates:function(t){switch(t){case"未入科":return"warning";case"在科":return"success";case"已出科":return"primary"}},confirmHandler:function(){this.form.List=this.list.filter(function(t){return!!t.教学考勤类型编号}),this.addEditSignIn(this.form)},addEditSignIn:function(){var t=r()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(o.m.POST_ADD_EDIT_SING_IN,e);case 2:this.$message.success("提交成功！"),this.$router.push({path:"/signIn"});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},_=(a("JPNU"),a("yjQ6"),a("ZrdR")),v=Object(_.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container page-common page-addStudent page-addEditSignIn"},[a("div",{staticClass:"btn-back-box"},[a("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[a("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),t.isLoad?a("div",{staticClass:"content"},[a("h5",{staticClass:"personal-title"},[t._v("学员考勤（"+t._s(t.newItme.学员信息.姓名)+"）")]),t._v(" "),a("h5",{staticClass:"title"},[t._v("学员信息")]),t._v(" "),a("table",{staticClass:"mailTable"},[a("tr",[a("th",[t._v("姓名")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.姓名))]),t._v(" "),a("th",[t._v("工号")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.工号))]),t._v(" "),a("th",[t._v("往届应届")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.往届应届))]),t._v(" "),a("th",[t._v("培训年届(年限)")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.学员培训年界)+"（ "+t._s(t.newItme.学员信息.学员培训年限)+" 年）")])]),t._v(" "),a("tr",[a("th",[t._v("学员类型名称")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.学员类型名称))]),t._v(" "),a("th",[t._v("教学专业")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.专业名称))]),t._v(" "),a("th",[t._v("教学本院策略")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.教学本院策略名称))]),t._v(" "),a("th",[t._v("报到时间")]),t._v(" "),a("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.报到时间,"yyyy-MM-dd")))])]),t._v(" "),a("tr",[a("th",[t._v("状态")]),t._v(" "),a("td",{class:t.getStatesA(t.newItme.学员信息.状态)},[t._v(t._s(t.newItme.学员信息.状态))]),t._v(" "),a("th",[t._v("当前科室管理员")]),t._v(" "),a("td",[t._v(t._s(t.newItme.学员信息.科室管理员姓名))]),t._v(" "),a("th",[t._v("计划入科日期")]),t._v(" "),a("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.计划开始培训日期,"yyyy-MM-dd")))]),t._v(" "),a("th",[t._v("计划出科日期")]),t._v(" "),a("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.计划结束培训日期,"yyyy-MM-dd")))])])]),t._v(" "),a("h5",{staticClass:"title"},[t._v("轮转信息")]),t._v(" "),a("table",{staticClass:"mailTable"},[a("tr",[a("th",[t._v("实际入科日期")]),t._v(" "),a("td",[t._v(t._s(t._f("dataFormat")(t.rotationData.教学轮转.实际入科日期,"yyyy-MM-dd")))]),t._v(" "),a("th",[t._v("计划出科日期")]),t._v(" "),a("td",[t._v(t._s(t._f("dataFormat")(t.rotationData.教学轮转.计划出科日期,"yyyy-MM-dd")))]),t._v(" "),a("th",[t._v("带教老师姓名")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.带教老师姓名))]),t._v(" "),a("th",[t._v("最低管床数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.最低管床数)+" 例")])]),t._v(" "),a("tr",[a("th",[t._v("最低管床数量")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.最低管床数量)+" 例")]),t._v(" "),a("th",[t._v("技能病例数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.技能病例数)+" 例")]),t._v(" "),a("th",[t._v("疾病病例数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.疾病病例数)+" 例")]),t._v(" "),a("th",[t._v("门诊病例数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.门诊病例数)+" 例")])]),t._v(" "),a("tr",[a("th",[t._v("住院病例数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.住院病例数)+" 例")]),t._v(" "),a("th",[t._v("医技病例数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.医技病例数)+" 例")]),t._v(" "),a("th",[t._v("最大学员人数")]),t._v(" "),a("td",[t._v(t._s(t.rotationData.教学轮转.最大学员人数)+" 人")]),t._v(" "),a("th",[t._v("状态")]),t._v(" "),a("td",[a("el-tag",{attrs:{type:t.getStates(t.rotationData.教学轮转.状态),size:"small","disable-transitions":""}},[t._v(t._s(t.rotationData.教学轮转.状态)+"\n          ")])],1)])]),t._v(" "),a("h5",{staticClass:"title"},[t._v("学员考勤")]),t._v(" "),a("div",{staticClass:"filter-container"},[a("div",{staticClass:"filter-item"},[t._v("考勤时间：\n        "),a("datePicker",{attrs:{date:t.time,placeholder:t.placeholder,type:"daterange"},on:{myEvent:t.changeTime}})],1),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"mini"},on:{click:t.onSearch}},[t._v("确定")]),t._v(" "),a("el-button",{staticClass:"filter-item",attrs:{type:"success",size:"mini"},on:{click:t.brnFullAttendance}},[t._v("一键全勤")])],1),t._v(" "),a("div",{staticClass:"content"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"tableone",attrs:{data:t.list,"element-loading-text":"Loading",height:"500",border:"",fit:"","highlight-current-row":"",stripe:""}},[a("el-table-column",{attrs:{align:"center",label:"序号",width:"60"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"考勤日期",prop:"考勤日期",align:"center",width:"130"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(t._f("dataFormat")(e.row.考勤日期,"yyyy-MM-dd")))]}}])}),t._v(" "),t._l(t.types,function(e){return a("el-table-column",{key:e.编号,attrs:{label:e.名称,width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(n){return[a("el-radio",{attrs:{label:e.编号},model:{value:n.row.教学考勤类型编号,callback:function(e){t.$set(n.row,"教学考勤类型编号",e)},expression:"scope.row.教学考勤类型编号"}})]}}])})}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"说明"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",type:"textarea",autosize:""},model:{value:e.row.说明,callback:function(a){t.$set(e.row,"说明",a)},expression:"scope.row.说明"}})]}}])})],2)],1)]):t._e(),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("提 交")])],1)])},[],!1,null,"5106ebfc",null);v.options.__file="addEditSignIn.vue";e.default=v.exports},JPNU:function(t,e,a){"use strict";var n=a("1HHF");a.n(n).a},LXEu:function(t,e,a){},"od/H":function(t,e,a){"use strict";var n=a("K3Y6"),i={name:"UploadFile",props:["date","type","placeholder"],data:function(){return{time:[],pickerOptions:n.n}},mounted:function(){this.date?this.time=this.date:this.time=[]},methods:{changeTime:function(t){this.$emit("myEvent",t)}}},s=a("ZrdR"),r=Object(s.a)(i,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{staticClass:"filter-item",attrs:{type:t.type,align:"right","unlink-panels":"","range-separator":"至","start-placeholder":t.placeholder.start,"end-placeholder":t.placeholder.end,"picker-options":t.pickerOptions},on:{change:t.changeTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})},[],!1,null,null,null);r.options.__file="datePicker.vue";e.a=r.exports},yjQ6:function(t,e,a){"use strict";var n=a("LXEu");a.n(n).a}}]);