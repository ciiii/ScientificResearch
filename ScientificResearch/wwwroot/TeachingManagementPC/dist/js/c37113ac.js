(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4b48"],{"+EG8":function(t,e,i){"use strict";var s=i("U0Iu");i.n(s).a},U0Iu:function(t,e,i){},lME7:function(t,e,i){"use strict";i.r(e);var s=i("cLjf"),n=i.n(s),a=i("hDQ3"),r=i.n(a),o=i("YHGi"),c=i("K3Y6"),l=i("u/cs"),m={name:"addDepartmentRotation",props:["item"],components:{selectDateAfter:l.a},data:function(){return{req:{"教学本院策略编号":""},form:{"编号":0,"学员编号":"","教学本院科室编号":"","本院科室名称":"","最低管床数量":"","最低全程管理数量":"","教学本院策略编号":"","计划入科日期":"","计划出科日期":"","最大学员人数":"","状态":"未入科",state:"warning",day:"","备注":""},departments:[],isLoad:!1,rules:{"教学本院科室编号":[{required:!0,message:"请选择教学本院科室！",trigger:"blur"}],"计划入科日期":[{required:!0,message:"请选择计划入科日期！",trigger:"blur"}],"计划出科日期":[{required:!0,message:"请选择计划出科日期！",trigger:"blur"}],"最低管床数量":[{required:!0,message:"请输入最低管床数量！",trigger:"blur"}],"最低全程管理数量":[{required:!0,message:"请输入最低全程管理数量！",trigger:"blur"}]}}},mounted:function(){this.form.学员编号=this.item.学员编号,this.form.教学本院策略编号=this.item.教学本院策略编号,this.req.教学本院策略编号=this.item.教学本院策略编号,this.form.计划入科日期=Object(c.b)(this.item.计划出科日期,1),this.form.计划出科日期=Object(c.b)(this.form.计划入科日期,1),this.getDepartments()},methods:{getDepartments:function(){var t=r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(o.k.GET_HOSPITAL_DEPARTMENT,this.req);case 2:(e=t.sent)&&e.length>0&&(this.departments=e,this.isLoad=!0);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),changeDepartment:function(t){var e=this.departments.find(function(e){return e.编号==t});this.form.本院科室名称=e.本院科室名称,this.form.最大学员人数=e.最大学员人数,this.form.最低管床数量=e.最低管床数量,this.form.最低全程管理数量=e.最低全程管理数量},myGetEndDate:function(t){this.form.计划出科日期=t},confirmHandler:Object(c.a)(function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("信息有误！"),!1;t.form.day=Object(c.f)(t.form.计划入科日期,t.form.计划出科日期),t.$emit("myEvent",t.form)})},300),cancelHandler:function(){this.$emit("myEvent",!1)}}},h=(i("muI8"),i("ZrdR")),d=Object(h.a)(m,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"content-box"},[t.isLoad?i("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"140px",size:"small"}},[i("el-form-item",{attrs:{label:"本院科室",prop:"教学本院科室编号"}},[i("el-select",{attrs:{filterable:"",placeholder:"请选择"},on:{change:t.changeDepartment},model:{value:t.form.教学本院科室编号,callback:function(e){t.$set(t.form,"教学本院科室编号",e)},expression:"form.教学本院科室编号"}},t._l(t.departments,function(t){return i("el-option",{key:t.编号,attrs:{label:t.本院科室名称+"("+t.教学专业科室名称+")",value:t.编号}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"计划入科日期",prop:"计划入科日期"}},[i("el-input",{attrs:{disabled:""},model:{value:t.form.计划入科日期,callback:function(e){t.$set(t.form,"计划入科日期",e)},expression:"form.计划入科日期"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"计划出科日期",prop:"计划出科日期"}},[i("selectDateAfter",{ref:"date",attrs:{date:t.form.计划出科日期,type:"date",format:"yyyy-MM-dd",title:"选择日期"},on:{myEvent:t.myGetEndDate}})],1),t._v(" "),i("el-form-item",{attrs:{label:"最低管床数量",prop:"最低管床数量"}},[i("el-input",{model:{value:t.form.最低管床数量,callback:function(e){t.$set(t.form,"最低管床数量",e)},expression:"form.最低管床数量"}},[i("template",{slot:"append"},[t._v("例")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"最低全程管理数量",prop:"最低全程管理数量"}},[i("el-input",{model:{value:t.form.最低全程管理数量,callback:function(e){t.$set(t.form,"最低全程管理数量",e)},expression:"form.最低全程管理数量"}},[i("template",{slot:"append"},[t._v("例")])],2)],1),t._v(" "),i("el-form-item",{attrs:{label:"备注"}},[i("el-input",{attrs:{type:"textarea"},model:{value:t.form.备注,callback:function(e){t.$set(t.form,"备注",e)},expression:"form.备注"}})],1)],1):t._e(),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelHandler}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("确 定")])],1)],1)},[],!1,null,"ca9ad3b8",null);d.options.__file="addDepartmentRotation.vue";var u=d.exports,f={name:"editRotation",components:{selectDateAfter:l.a,addDepartmentRotation:u},data:function(){return{form:{"编号":0,"学员编号":0,"计划入科日期":"","计划出科日期":"","实际入科日期":"","实际出科日期":"","教学本院科室编号":0,"带教老师编号":0,"最低管床数量":0,"最低全程管理数量":0,"备注":""},newItme:{},isLoad:!1,isDialog:!1,isShow:!1,index:0,obj:{}}},mounted:function(){var t=this;sessionStorage.getItem("item")&&(this.newItme=JSON.parse(sessionStorage.getItem("item")),this.form.学员编号=this.newItme.学员信息.编号,this.newItme.轮转信息.forEach(function(e){e.day=Object(c.f)(e.计划入科日期,e.计划出科日期),e.state=t.getStatesB(e.状态)}),this.obj=this.newItme.轮转信息[0],this.isLoad=!0)},methods:{getStatesA:function(t){switch(t){case"未报到":return"state-warning";case"退培":return"state-error";case"已报到":return"state-success";case"轮转计划已安排":return"state-primary";case"在培":return"state-success";case"待结业":return"state-warning";case"结业":return"state-success"}},getStatesB:function(t){switch(t){case"未入科":return"warning";case"在科":return"success";case"已出科":return"primary"}},clickLi:function(t,e){this.index=t,this.obj=e},isError:function(t){this.$message({showClose:!0,message:"【"+t+"】状态不能进行操作！",type:"error"})},btnDown:function(){if("未入科"!=this.obj.状态)return this.isError(this.obj.状态);this.index!=this.newItme.轮转信息.length-1&&(this.newItme.轮转信息=Object(c.c)(this.newItme.轮转信息,this.index,this.index+1),this.index++,this.newItme.轮转信息[this.index].计划出科日期=this.newItme.轮转信息[this.index-1].计划出科日期,this.newItme.轮转信息[this.index-1].计划入科日期=this.newItme.轮转信息[this.index].计划入科日期,this.newItme.轮转信息[this.index].计划入科日期=Object(c.o)(this.newItme.轮转信息[this.index].计划出科日期,this.newItme.轮转信息[this.index].day),this.newItme.轮转信息[this.index-1].计划出科日期=Object(c.b)(this.newItme.轮转信息[this.index-1].计划入科日期,this.newItme.轮转信息[this.index-1].day))},btnUp:function(){if("未入科"!=this.obj.状态)return this.isError(this.obj.状态);0!=this.index&&(this.newItme.轮转信息=Object(c.c)(this.newItme.轮转信息,this.index,this.index-1),this.index--,this.newItme.轮转信息[this.index].计划入科日期=this.newItme.轮转信息[this.index+1].计划入科日期,this.newItme.轮转信息[this.index+1].计划出科日期=this.newItme.轮转信息[this.index].计划出科日期,this.newItme.轮转信息[this.index].计划出科日期=Object(c.b)(this.newItme.轮转信息[this.index].计划入科日期,this.newItme.轮转信息[this.index].day),this.newItme.轮转信息[this.index+1].计划入科日期=Object(c.o)(this.newItme.轮转信息[this.index+1].计划出科日期,this.newItme.轮转信息[this.index+1].day))},btnDel:function(){var t=this;if("未入科"!=this.obj.状态)return this.isError(this.obj.状态);this.$confirm("确认删除已选轮转吗?","提示",{type:"warning"}).then(function(){if(0==t.obj.编号)t.delItem();else{var e=[];e.push(t.obj.编号),t.delRotation(e)}})},btnAdd:function(){this.item=this.newItme.轮转信息[this.newItme.轮转信息.length-1],this.isDialog=!0},myEvent:function(t){0!=t&&this.newItme.轮转信息.push(t),this.isDialog=!1},confirmHandler:Object(c.a)(function(){var t=[];this.newItme.轮转信息.forEach(function(e){t.push(e)}),this.addEditRotation(t)},300),addEditRotation:function(){var t=r()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(o.m.POST_ADD_OR_EDIT_ROTATION,e);case 2:this.$message.success("提交成功！"),this.$router.push({path:"/rotationList",query:{state:"轮转计划已安排"}});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),delRotation:function(){var t=r()(n.a.mark(function t(e){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(o.m.POST_BATCH_DELETE_ROTATION,e);case 2:this.$message.success("提交成功！"),this.delItem();case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),delItem:function(){var t=this;this.newItme.轮转信息.splice(this.index,1),this.newItme.轮转信息.forEach(function(e,i){i>=t.index&&(e.计划入科日期=Object(c.b)(t.newItme.轮转信息[i-1].计划出科日期,1),e.计划出科日期=Object(c.b)(e.计划入科日期,e.day))}),this.newItme.轮转信息.length>0?this.obj=this.newItme.轮转信息[0]:this.obj=[],this.index=0}}},p=(i("+EG8"),Object(h.a)(f,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container page-common page-addStudent"},[i("div",{staticClass:"btn-back-box"},[i("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[i("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),t.isLoad?i("div",{staticClass:"content"},[i("h5",{staticClass:"personal-title"},[t._v("修改学员轮转（"+t._s(t.newItme.学员信息.姓名)+"）")]),t._v(" "),i("h5",{staticClass:"title"},[t._v("学员信息")]),t._v(" "),i("table",{staticClass:"mailTable"},[i("tr",[i("th",[t._v("姓名")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.姓名))]),t._v(" "),i("th",[t._v("工号")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.工号))]),t._v(" "),i("th",[t._v("往届应届")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.往届应届))]),t._v(" "),i("th",[t._v("培训年届(年限)")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.学员培训年界)+"（ "+t._s(t.newItme.学员信息.学员培训年限)+" 年）")])]),t._v(" "),i("tr",[i("th",[t._v("学员类型名称")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.学员类型名称))]),t._v(" "),i("th",[t._v("教学专业")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.专业名称))]),t._v(" "),i("th",[t._v("教学本院策略")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.教学本院策略名称))]),t._v(" "),i("th",[t._v("报到时间")]),t._v(" "),i("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.报到时间,"yyyy-MM-dd")))])]),t._v(" "),i("tr",[i("th",[t._v("状态")]),t._v(" "),i("td",{class:t.getStatesA(t.newItme.学员信息.状态)},[t._v(t._s(t.newItme.学员信息.状态))]),t._v(" "),i("th",[t._v("当前轮转本院科室")]),t._v(" "),i("td",[t._v(t._s(t.newItme.学员信息.当前教学轮转本院科室名称))]),t._v(" "),i("th",[t._v("计划开始培训日期")]),t._v(" "),i("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.计划开始培训日期,"yyyy-MM-dd")))]),t._v(" "),i("th",[t._v("计划结束培训日期")]),t._v(" "),i("td",[t._v(t._s(t._f("dataFormat")(t.newItme.学员信息.计划结束培训日期,"yyyy-MM-dd")))])])]),t._v(" "),i("h5",{staticClass:"title"},[t._v("此学员在本院待轮转的科室")]),t._v(" "),i("div",{staticClass:"rotation-box"},[i("div",{staticClass:"left"},[i("ul",t._l(t.newItme.轮转信息,function(e,s){return i("li",{key:e.计划出科日期,class:{active:t.index==s},on:{click:function(i){t.clickLi(s,e)}}},[i("a",{attrs:{href:"javascript:;"}},[i("span",{staticClass:"title"},[i("el-tag",[t._v(t._s(e.本院科室名称))])],1),t._v(" "),i("span",{staticClass:"begin-time"},[i("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t._f("dataFormat")(e.计划入科日期,"yyyy-MM-dd"))+" 至")]),t._v(" "),i("span",{staticClass:"end-time"},[i("i",{staticClass:"el-icon-time"}),t._v(" "+t._s(t._f("dataFormat")(e.计划出科日期,"yyyy-MM-dd")))]),t._v(" "),i("span",[t._v(" ( 时间："+t._s(e.day)+"天，可容人数："+t._s(e.最大学员人数)+"人)")]),t._v(" "),i("span",{staticClass:"state"},[i("el-tag",{attrs:{type:e.state,size:"small","disable-transitions":""}},[t._v(t._s(e.状态))])],1)])])}))]),t._v(" "),i("div",{staticClass:"right"},[i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"下移",placement:"right"}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.btnDown}},[i("i",{staticClass:"iconfont iconxiangxia"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"上移",placement:"right"}},[i("el-button",{attrs:{type:"primary",plain:""},on:{click:t.btnUp}},[i("i",{staticClass:"iconfont iconshangxian"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"删除",placement:"right"}},[i("el-button",{attrs:{type:"danger",plain:""},on:{click:t.btnDel}},[i("i",{staticClass:"iconfont iconshanchu11"})])],1),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"添加",placement:"right"}},[i("el-button",{attrs:{type:"success",plain:""},on:{click:t.btnAdd}},[i("i",{staticClass:"iconfont icontianjia"})])],1)],1)])]):t._e(),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("提 交")])],1),t._v(" "),t.isDialog?i("el-dialog",{staticClass:"common-dialog",attrs:{title:"添加科室轮转",visible:t.isDialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.isDialog=e}}},[i("addDepartmentRotation",{ref:"child",attrs:{item:t.item},on:{myEvent:t.myEvent}})],1):t._e()],1)},[],!1,null,"42116f2c",null));p.options.__file="editRotation.vue";e.default=p.exports},muI8:function(t,e,i){"use strict";var s=i("n4EV");i.n(s).a},n4EV:function(t,e,i){},"u/cs":function(t,e,i){"use strict";var s={name:"UploadFile",props:["date","type","format","title","dateTime"],data:function(){return{time:"",pickerOptionsStart:{}}},mounted:function(){this.date?"year"==this.type?this.time=this.date.toString():this.time=new Date(this.date):this.time="",this.pickerOptions()},methods:{changeDate:function(t){this.$emit("myEvent",t)},pickerOptions:function(){if(this.date&&""!=this.date){var t=this;this.pickerOptionsStart={disabledDate:function(e){return e.getTime()<new Date(t.date).getTime()}}}else this.pickerOptionsStart={disabledDate:function(t){return t.getTime()<Date.now()-864e5}}}}},n=i("ZrdR"),a=Object(n.a)(s,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{attrs:{type:t.type,format:t.format,"value-format":t.format,placeholder:t.title,"picker-options":t.pickerOptionsStart},on:{change:t.changeDate},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})},[],!1,null,null,null);a.options.__file="selectDateAfter.vue";e.a=a.exports}}]);