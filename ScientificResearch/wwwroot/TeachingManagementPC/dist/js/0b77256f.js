(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-4584"],{Bga7:function(e,t,r){"use strict";var n=r("PgVU");r.n(n).a},COv6:function(e,t,r){"use strict";r.r(t);var n=r("cLjf"),s=r.n(n),a=r("hDQ3"),o=r.n(a),i=r("YHGi"),l=r("K3Y6"),c=r("ktv3"),u={name:"addUser",components:{cascaderDepartment:r("xDfy").a},data:function(){return{rules:{"姓名":[{required:!0,message:"请输入姓名！",trigger:"blur"}],"工号":[{required:!0,message:"请输入工号！",trigger:"blur"}],"密码":[{required:!0,message:"请输入密码！",trigger:"blur"}],"身份证":[{required:!0,message:"请输入正确的身份证号！",trigger:"blur"},{validator:c.b}],"手机号":[{required:!0,message:"请输入正确的手机号！",trigger:"blur"},{validator:c.c}],"部门编号":[{required:!0,message:"请选择所在科室！",trigger:"blur"}]},userType:[],posts:[],form:{"编号":0,"工号":"","密码":"","姓名":"","部门编号":"","性别":"男","身份证":"","出生日期":"","入职日期":"","手机":"","邮箱":"","学位":"","政治面貌":"","职务名称":"","备注":"","是否启用":!0},departments:[],selected:[],userInfo:{},isLoad:!1}},mounted:function(){localStorage.getItem("userInfo")&&(this.userInfo=JSON.parse(localStorage.getItem("userInfo")).人员,this.getUserDetails(this.userInfo.编号)),this.getPosts()},methods:{getUserDetails:function(){var e=o()(s.a.mark(function e(t){var r,n;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={"人员编号":t},e.next=3,this.$http.myGet(i.n.GET_USER_DETAILS,r);case 3:(n=e.sent)&&(this.form=n,this.isLoad=!0);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getPosts:function(){var e=o()(s.a.mark(function e(){var t,r;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={"分类":"职称"},e.next=3,this.$http.myGet(i.f.GET_TYPE_DICTIONARY,t);case 3:(r=e.sent)&&r.length>0&&(this.posts=r);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),confirmHandler:Object(l.a)(function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$message.error("信息有误！"),!1;e.addOrEditUser(e.form)})},300),addOrEditUser:function(){var e=o()(s.a.mark(function e(t){return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myPost(i.n.POST_ADD_OR_EDIT_USER,t);case 2:this.$message.success("提交成功！"),this.$emit("myEvent",!1);case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getDepartmentMyEvent:function(e){this.form.部门编号=e}}},f=(r("lC99"),r("Bga7"),r("ZrdR")),m=Object(f.a)(u,function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container page-common page-addStudent"},[e.isLoad?r("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"155px",size:"small"}},[r("div",{staticClass:"right-content"},[r("h5",{staticClass:"personal-title"},[e._v("个人资料（"+e._s(e.form.姓名)+"）")]),e._v(" "),r("h5",{staticClass:"title"},[e._v("基本信息")]),e._v(" "),r("div",{staticClass:"item-box"},[r("el-form-item",{attrs:{label:"姓名",prop:"姓名"}},[r("el-input",{model:{value:e.form.姓名,callback:function(t){e.$set(e.form,"姓名","string"==typeof t?t.trim():t)},expression:"form.姓名"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"工号",prop:"工号"}},[r("el-input",{model:{value:e.form.工号,callback:function(t){e.$set(e.form,"工号",t)},expression:"form.工号"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"所在科室",prop:"部门编号"}},[r("cascaderDepartment",{ref:"child",attrs:{departmentId:e.userInfo.部门编号},on:{myEvent:e.getDepartmentMyEvent}})],1),e._v(" "),r("el-form-item",{attrs:{label:"性别",prop:"性别"}},[r("el-radio-group",{model:{value:e.form.性别,callback:function(t){e.$set(e.form,"性别",t)},expression:"form.性别"}},[r("el-radio",{attrs:{label:"男"}}),e._v(" "),r("el-radio",{attrs:{label:"女"}})],1)],1),e._v(" "),r("el-form-item",{attrs:{label:"出生日期",prop:"出生日期"}},[r("el-input",{model:{value:e.form.出生日期,callback:function(t){e.$set(e.form,"出生日期",t)},expression:"form.出生日期"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"身份证",prop:"身份证"}},[r("el-input",{model:{value:e.form.身份证,callback:function(t){e.$set(e.form,"身份证",t)},expression:"form.身份证"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"手机号",prop:"手机号"}},[r("el-input",{attrs:{type:"number"},model:{value:e.form.手机号,callback:function(t){e.$set(e.form,"手机号",t)},expression:"form.手机号"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"邮箱",prop:"邮箱"}},[r("el-input",{model:{value:e.form.邮箱,callback:function(t){e.$set(e.form,"邮箱",t)},expression:"form.邮箱"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"政治面貌",prop:"政治面貌"}},[r("el-input",{model:{value:e.form.政治面貌,callback:function(t){e.$set(e.form,"政治面貌",t)},expression:"form.政治面貌"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"入职日期",prop:"入职日期"}},[r("el-input",{model:{value:e.form.入职日期,callback:function(t){e.$set(e.form,"入职日期",t)},expression:"form.入职日期"}})],1),e._v(" "),r("el-form-item",{attrs:{label:"职称",prop:"职务名称"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.职务名称,callback:function(t){e.$set(e.form,"职务名称",t)},expression:"form.职务名称"}},e._l(e.posts,function(e){return r("el-option",{key:e.编号,attrs:{label:e.值,value:e.值}})}))],1),e._v(" "),r("el-form-item",{attrs:{label:"最高学位",prop:"学位"}},[r("el-input",{model:{value:e.form.学位,callback:function(t){e.$set(e.form,"学位",t)},expression:"form.学位"}})],1),e._v(" "),r("el-form-item",{staticClass:"el-form-item-block",attrs:{label:"说明信息",prop:"备注"}},[r("el-input",{attrs:{type:"textarea"},model:{value:e.form.备注,callback:function(t){e.$set(e.form,"备注",t)},expression:"form.备注"}})],1)],1)])]):e._e(),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{attrs:{type:"primary"},on:{click:e.confirmHandler}},[e._v("提 交")])],1)],1)},[],!1,null,"74c54fdf",null);m.options.__file="index.vue";t.default=m.exports},"P+wg":function(e,t,r){"use strict";var n=r("bDxQ");r.n(n).a},PgVU:function(e,t,r){},bDxQ:function(e,t,r){},ktv3:function(e,t,r){"use strict";function n(e,t,r){""==t||void 0==t||null==t?r():/(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)/.test(t)||""==t?r():r(new Error("请输入正确的身份证号码！"))}function s(e,t,r){""==t||void 0==t||null==t?r():/^[1][3,4,5,7,8][0-9]{9}$/.test(t)||""==t?r():r(new Error("请输入正确的电话号码！"))}function a(e,t,r){if(!t)return r(new Error("输入不可以为空！"));setTimeout(function(){if(Number(t)){/^[0-9]*[1-9][0-9]*$/.test(t)?r():r(new Error("请输入正整数！"))}else r(new Error("请输入正整数！"))},0)}r.d(t,"b",function(){return n}),r.d(t,"c",function(){return s}),r.d(t,"a",function(){return a})},lC99:function(e,t,r){"use strict";var n=r("zEH8");r.n(n).a},xDfy:function(e,t,r){"use strict";var n=r("cLjf"),s=r.n(n),a=r("hDQ3"),o=r.n(a),i=r("YHGi"),l=r("K3Y6"),c={name:"selectDepartment",props:["departmentId"],data:function(){return{selected:[],departments:[],req:{"是否启用":!0}}},mounted:function(){this.getDepartment()},methods:{getDepartment:function(){var e=o()(s.a.mark(function e(){var t,r=this;return s.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myGet(i.i.GET_ENABLE_DEPARTMENT_LIST,this.req);case 2:(t=e.sent)&&t.length>0?(t.forEach(function(e){e.label=e.名称,e.value=e.编号}),this.selected=[],t.find(function(e,n,s){e.编号==r.departmentId&&r.isPartent(t,e.上级部门编号)}),this.departments=Object(l.d)(t,"编号","上级部门编号"),this.selected.push(this.departmentId)):this.departments=[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),isPartent:function(e,t){var r=this;0!=t&&(this.selected.unshift(t),e.find(function(n,s,a){n.编号===t&&r.isPartent(e,n.上级部门编号)}))},handleChange:function(e){console.info(e[e.length-1]),this.$emit("myEvent",e[e.length-1])}}},u=(r("P+wg"),r("ZrdR")),f=Object(u.a)(c,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{attrs:{options:e.departments,"show-all-levels":!1,clearable:""},on:{change:e.handleChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},[],!1,null,"ffe59ddc",null);f.options.__file="cascaderDepartment.vue";t.a=f.exports},zEH8:function(e,t,r){}}]);