(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-679b"],{IUeK:function(t,e,n){},SHwn:function(t,e,n){"use strict";var i=n("kAGk");n.n(i).a},fzI3:function(t,e,n){"use strict";n.r(e);var i=n("cLjf"),s=n.n(i),a=n("hDQ3"),r=n.n(a),l=n("YHGi"),o=n("K3Y6"),c={name:"addTask",props:["item","isAdd","id","info"],data:function(){return{list:[],form:{"编号":0,"项目名称":"","任务类型编号":"","是否门诊":!0,"是否病房":!0,"是否医技":!0,"最低评分要求":"","数量要求":0,"备注":""},rules:{"项目名称":[{required:!0,message:"请输入任务项目名称！",trigger:"blur"}],"任务类型编号":[{required:!0,message:"请选择任务类型！",trigger:"blur"}],"是否门诊":[{required:!0,message:"请选择门诊！",trigger:"blur"}],"是否病房":[{required:!0,message:"请选择病房！",trigger:"blur"}],"是否医技":[{required:!0,message:"请选择医技！",trigger:"blur"}],"最低评分要求":[{required:!0,message:"请选择最低评分要求！",trigger:"blur"}],"数量要求":[{required:!0,message:"请输入数量要求！",trigger:"blur"}]},types:[],levels:[],title:""}},mounted:function(){this.isAdd||(this.form=Object(o.g)(this.item)),this.title=this.info.教学专业名称+"--"+this.info.科室名称,this.getTypes(),this.getlevels()},methods:{cancelHandler:function(){this.$emit("myEvent",!1)},getTypes:function(){var t=r()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(l.k.GET_MAJOR_DEPARTMENT_TASK_TYPE,"");case 2:(e=t.sent)&&e.length>0&&(this.types=e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getlevels:function(){var t=r()(s.a.mark(function t(){var e;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(l.f.GET_TEACHING_GRADING_SCALE,"");case 2:(e=t.sent)&&e.length>0&&(this.levels=e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),confirmHandler:Object(o.a)(function(){var t=this;this.$refs.form.validate(function(e){if(!e)return t.$message.error("信息有误！"),!1;var n={Id:t.id,List:[t.form]};t.addEditTask(n)})},300),addEditTask:function(){var t=r()(s.a.mark(function t(e){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(l.k.POST_ADD_EDIT_MAJOR_DEPARTMENT_TASK,e);case 2:this.$message.success("提交成功！"),this.$emit("myEvent",!1);case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}},u=(n("SHwn"),n("ZrdR")),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"content-box"},[n("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-width":"130px",size:"small"}},[n("el-form-item",{attrs:{label:"专业科室"}},[n("el-input",{attrs:{disabled:"",value:t.title}})],1),t._v(" "),n("el-form-item",{attrs:{label:"任务项目名称",prop:"项目名称"}},[n("el-input",{model:{value:t.form.项目名称,callback:function(e){t.$set(t.form,"项目名称",e)},expression:"form.项目名称"}})],1),t._v(" "),n("el-form-item",{attrs:{label:"任务类型",prop:"任务类型编号"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.任务类型编号,callback:function(e){t.$set(t.form,"任务类型编号",e)},expression:"form.任务类型编号"}},t._l(t.types,function(t){return n("el-option",{key:t.编号,attrs:{label:t.名称,value:t.编号}})}))],1),t._v(" "),n("el-form-item",{attrs:{label:"是否门诊",prop:"是否门诊"}},[n("el-radio-group",{model:{value:t.form.是否门诊,callback:function(e){t.$set(t.form,"是否门诊",e)},expression:"form.是否门诊"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"是否病房",prop:"是否病房"}},[n("el-radio-group",{model:{value:t.form.是否病房,callback:function(e){t.$set(t.form,"是否病房",e)},expression:"form.是否病房"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"是否医技",prop:"是否医技"}},[n("el-radio-group",{model:{value:t.form.是否医技,callback:function(e){t.$set(t.form,"是否医技",e)},expression:"form.是否医技"}},[n("el-radio",{attrs:{label:!0}},[t._v("是")]),t._v(" "),n("el-radio",{attrs:{label:!1}},[t._v("否")])],1)],1),t._v(" "),n("el-form-item",{attrs:{label:"掌握程度",prop:"最低评分要求"}},[n("el-select",{attrs:{placeholder:"请选择"},model:{value:t.form.最低评分要求,callback:function(e){t.$set(t.form,"最低评分要求",e)},expression:"form.最低评分要求"}},t._l(t.levels,function(e){return n("el-option",{key:e.编号,attrs:{label:e.等级名称,value:e.最小分值}},[n("span",{staticStyle:{float:"left"}},[t._v(t._s(e.等级名称))]),t._v(" "),n("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.最小分值))])])}))],1),t._v(" "),n("el-form-item",{attrs:{label:"数量要求",prop:"数量要求"}},[n("el-input",{attrs:{type:"number"},model:{value:t.form.数量要求,callback:function(e){t.$set(t.form,"数量要求",e)},expression:"form.数量要求"}},[n("template",{slot:"append"},[t._v("例")])],2),t._v(" "),n("p",{staticClass:"explain"},[t._v("为 0 表示不作要求！")])],1)],1),t._v(" "),n("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:t.cancelHandler}},[t._v("取 消")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("确 定")])],1)],1)},[],!1,null,"54e50454",null);p.options.__file="addOrEditTask.vue";var f={name:"taskList",components:{addOrEditTask:p.exports},data:function(){return{list:[],req:{Index:1,Size:13,OrderType:!1,"教学专业科室编号":"","Like项目名称":""},form:{},item:{},isLoad:!1,isDialog:!1,listLoading:!0,isAdd:!1,total:0,title:"",multipleSelection:[],getRowKeys:function(t){return t.编号}}},mounted:function(){sessionStorage.getItem("item")&&(this.form=JSON.parse(sessionStorage.getItem("item")),this.req.教学专业科室编号=this.form.编号),this.listLoading=!0,this.getTasks()},methods:{getTasks:function(){var t=r()(s.a.mark(function t(){var e,n;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(l.k.GET_PAGING_MAJOR_DEPARTMENT_TASK,this.req);case 2:(e=t.sent)&&e.list.length>0&&(this.total=e.total,e=e.list,n=(this.req.Index-1)*this.req.Size+1,e.forEach(function(t){t.number=n,n++}),this.list=e),this.listLoading=!1,this.isLoad=!0;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),onSearch:function(){this.req.Index=1,this.listLoading=!0,this.list=[],this.getTasks()},handleSizeChange:function(t){console.log("每页 "+t+" 条")},handleCurrentChange:function(t){this.req.Index=t,this.getTasks()},handleSelectionChange:function(t){var e=this;this.multipleSelection=[],t&&t.forEach(function(t){t&&e.multipleSelection.push(t)}),console.info(this.multipleSelection)},btnBatchDel:function(){var t=this;0==this.multipleSelection.length?this.$message.error("请先勾选需要删除的任务项目！"):this.$confirm("确认要删除已勾选该任务吗?","提示",{type:"warning"}).then(function(){var e=[];t.multipleSelection.forEach(function(t){e.push(t.编号)}),t.postBatchDelTask(e)})},postBatchDelTask:function(){var t=r()(s.a.mark(function t(e){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(l.k.POST_DELETE_MAJOR_DEPARTMENT_TASK,e);case 2:this.$message.success("提交成功！"),this.onSearch();case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),btnDelTask:function(t,e){var n=this;this.$confirm("确认要删除该任务吗?","提示",{type:"warning"}).then(function(){n.postDelTask(t.编号,e)})},postDelTask:function(){var t=r()(s.a.mark(function t(e,n){var i;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=[e],t.next=3,this.$http.myPost(l.k.POST_DELETE_MAJOR_DEPARTMENT_TASK,i);case 3:this.list.splice(n,1),this.$message.success("提交成功！");case 5:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}(),btnAddEdit:function(t,e,n){this.title=t,this.isAdd=e,this.item=n,this.isDialog=!0},getMyEvent:function(t){this.isDialog=t,this.onSearch()}}},d=(n("yULi"),Object(u.a)(f,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoad?n("div",{staticClass:"app-container page-common page-addStudent"},[n("div",{staticClass:"btn-back-box"},[n("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[n("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),n("p",{staticClass:"item-title"},[n("i",{staticClass:"iconfont iconkeshikucunguanli"}),n("span",[t._v(" "+t._s(t.form.教学专业名称)+" -- "+t._s(t.form.科室名称))])]),t._v(" "),n("div",{staticClass:"filter-container"},[n("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"success"},on:{click:function(e){t.btnAddEdit("添加任务",!0,"")}}},[n("i",{staticClass:"iconfont icontianjia"}),t._v(" 添加任务\n    ")]),t._v(" "),n("el-input",{staticClass:"filter-item",staticStyle:{width:"200px"},attrs:{placeholder:"项目名称","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.onSearch(e):null}},model:{value:t.req.Like项目名称,callback:function(e){t.$set(t.req,"Like项目名称",e)},expression:"req.Like项目名称"}}),t._v(" "),n("el-button",{staticClass:"filter-item",attrs:{size:"small",type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:t.btnBatchDel}},[t._v("批量删除")])],1),t._v(" "),n("div",{staticClass:"content"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"tableone",attrs:{data:t.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"",stripe:"","row-key":t.getRowKeys},on:{"selection-change":t.handleSelectionChange}},[n("el-table-column",{attrs:{type:"selection",align:"center",width:"55","reserve-selection":!0,prop:"编号"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"序号",width:"90",prop:"number"}}),t._v(" "),n("el-table-column",{attrs:{label:"任务项目名称",prop:"项目名称"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"任务类型",prop:"任务类型名称"}}),t._v(" "),n("el-table-column",{attrs:{label:"是否医技",prop:"是否医技",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.是否医技?"是":"否")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"是否病房",prop:"是否病房",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.是否病房?"是":"否")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"是否门诊",prop:"是否门诊",align:"center",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(e.row.是否医技?"是":"否")+"\n        ")]}}])}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"最低评分等级",prop:"最低评分等级"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"最低评分要求（分）",prop:"最低评分要求"}}),t._v(" "),n("el-table-column",{attrs:{align:"center",label:"数量要求（例）",prop:"数量要求"}}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"200px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"success",plain:"",icon:"el-icon-edit"},on:{click:function(n){t.btnAddEdit("修改任务",!1,e.row)}}},[t._v("编辑\n          ")]),t._v(" "),n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){t.btnDelTask(e.row,e.$index)}}},[t._v("删除\n          ")])]}}])})],1),t._v(" "),n("div",{staticClass:"block paging"},[n("el-pagination",{attrs:{"current-page":t.req.Index,"page-size":t.req.Size,background:"",layout:"total, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.$set(t.req,"Index",e)}}})],1)],1),t._v(" "),t.isDialog?n("el-dialog",{staticClass:"common-dialog",attrs:{title:t.title,visible:t.isDialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(e){t.isDialog=e}}},[n("addOrEditTask",{ref:"child",attrs:{item:t.item,isAdd:t.isAdd,info:t.form,id:this.req.教学专业科室编号},on:{myEvent:t.getMyEvent}})],1):t._e()],1):t._e()},[],!1,null,"4e41fa41",null));d.options.__file="taskList.vue";e.default=d.exports},kAGk:function(t,e,n){},yULi:function(t,e,n){"use strict";var i=n("IUeK");n.n(i).a}}]);