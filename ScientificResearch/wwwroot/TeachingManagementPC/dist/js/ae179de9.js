(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-3b76"],{"833W":function(t,e,i){},"8tQD":function(t,e,i){"use strict";var a=i("Q+00");i.n(a).a},"IK+o":function(t,e,i){"use strict";var a=i("833W");i.n(a).a},"Q+00":function(t,e,i){},Tj7U:function(t,e,i){"use strict";i.r(e);var a=i("cLjf"),n=i.n(a),s=i("hDQ3"),r=i.n(s),o=i("YHGi"),l=i("K3Y6"),c={name:"departmentReportStatistics",components:{datePicker:i("od/H").a},data:function(){return{req:{beginDate:"",endDate:""},isLoad:!1,isDialog:!1,newItme:{},dateArr:[],majors:[],placeholder:{start:"开始培训日期",end:"结束培训日期"},minTime:"",maxTime:"",time:[],widthValue:290}},mounted:function(){var t=(new Date).getFullYear()+"-01-01",e=Object(l.h)(new Date,"yyyy-MM-dd");this.req.beginDate=t,this.req.endDate=e,this.time=[t,e],this.getList(),this.getMajors()},methods:{getStatesA:function(t){switch(t){case"未报到":return"state-warning";case"退培":return"state-error";case"已报到":return"state-success";case"轮转计划已安排":return"state-primary";case"在培":return"state-success";case"待结业":return"state-warning";case"结业":return"state-success"}},getStatesB:function(t){switch(t){case"未入科":return"warning";case"在科":return"success";case"已出科":return"primary"}},getMajors:function(){var t=r()(n.a.mark(function t(){var e;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(o.k.GET_TRAINING_MAJOR_LIST,"");case 2:(e=t.sent)&&e.length>0&&(this.majors=e);case 4:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getList:function(){var t=r()(n.a.mark(function t(){var e,i=this;return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(o.m.GET_DEPARTMENT_STATISTICS_ROTATION,this.req);case 2:(e=t.sent)&&e.length>0?(console.info(e),e.forEach(function(t){t.统计轮转的结果.未入科.forEach(function(t){var e=i.getDay(t);t.itemWidth=e.itemWidth,t.leftWidth=e.leftWidth}),t.统计轮转的结果.在科.forEach(function(t){var e=i.getDay(t);t.itemWidth=e.itemWidth,t.leftWidth=e.leftWidth}),t.统计轮转的结果.已出科.forEach(function(t){var e=i.getDay(t);t.itemWidth=e.itemWidth,t.leftWidth=e.leftWidth})}),this.list=e,this.dateArr=[],this.getTime()):(this.list=[],this.total=0),this.listLoading=!1,this.isLoad=!0;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getDay:function(t){var e=new Date(t.日期),i=new Date(this.req.beginDate),a=t.人数,n=Math.floor((e-i)/864e5),s=this.widthValue/30;return{itemWidth:a*s,leftWidth:n*s}},getTime:function(){var t=new Date(this.req.beginDate),e=new Date(this.req.endDate),i=t.getTime(),a=e.getTime(),n=t.getFullYear(),s=t.getMonth()+1;this.getMonths(i,a,n,s)},getMonths:function(t,e,i,a){if(t<=e){var n=i,s=a;s>12&&(s=1,n++);var r=void 0,o=n+"年"+(r=s<10?"0"+s:s),l=Date.parse(new Date(n+"-"+r+"-01 00:00:00"));this.dateArr.push(o),s++,this.getMonths(l,e,n,s)}},arraySpanMethod:function(t){t.row,t.column,t.rowIndex;var e=t.columnIndex;return 2==e?{colspan:this.dateArr.length,rowspan:1}:e>2?{colspan:0,rowspan:0}:void 0},changeTime:function(t){this.time=t,this.req.beginDate=Object(l.h)(this.time[0],"yyyy-MM-dd"),this.req.endDate=Object(l.h)(this.time[1],"yyyy-MM-dd")},onSearch:function(){if(this.listLoading=!0,Object(l.f)(this.req.beginDate,this.req.endDate)>365)return this.$message.error("查询轮转的【起止日期】间隔不能大于一年！");this.list=[],this.getList()},isError:function(t){this.$message({showClose:!0,message:"【"+t+"】状态不能进行操作！",type:"error"})},myEvent:function(t){this.newItme.轮转信息.push(t),this.isDialog=!1}}},h=(i("8tQD"),i("IK+o"),i("ZrdR")),u=Object(h.a)(c,function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"app-container page-common page-addStudent page-departmentReportStatistics"},[i("div",{staticClass:"btn-back-box"},[i("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[i("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),i("h4",{staticClass:"page-title",attrs:{align:"center"}},[t._v("按科室统计轮转")]),t._v(" "),i("div",{staticClass:"filter-container"},[i("div",{staticClass:"filter-item"},[t._v("\n      培训专业\n      "),i("el-select",{staticStyle:{width:"150px"},attrs:{placeholder:"请选择"},on:{change:t.onSearch},model:{value:t.req.专业编号,callback:function(e){t.$set(t.req,"专业编号",e)},expression:"req.专业编号"}},[i("el-option",{attrs:{label:"全部",value:""}}),t._v(" "),t._l(t.majors,function(e){return i("el-option",{key:e.编号,attrs:{label:e.名称+" - "+e.年份,value:e.编号}},[i("span",{staticStyle:{float:"left"}},[t._v(t._s(e.名称))]),t._v(" "),i("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[t._v(t._s(e.年份))])])})],2)],1),t._v(" "),t.isLoad?i("div",{staticClass:"filter-item"},[i("datePicker",{attrs:{date:t.time,placeholder:t.placeholder,type:"daterange"},on:{myEvent:t.changeTime}})],1):t._e(),t._v(" "),i("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询\n    ")])],1),t._v(" "),t.isLoad?i("div",{staticClass:"content"},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"tableone",attrs:{data:t.list,"element-loading-text":"Loading",stripe:"","span-method":t.arraySpanMethod}},[i("el-table-column",{attrs:{align:"center",fixed:"",label:"序号",width:"80"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"教学科室",fixed:"",width:"150",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.教学科室.名称))]),t._v(" "),i("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"科室管理员",placement:"right"}},[i("el-button",{attrs:{type:"primary",plain:"",size:"mini"}},[t._v(t._s(e.row.教学科室.科室管理员姓名))])],1)]}}])}),t._v(" "),t._l(t.dateArr,function(e){return i("el-table-column",{key:e,attrs:{label:e,width:t.widthValue},scopedSlots:t._u([{key:"default",fn:function(e){return[t._l(e.row.统计轮转的结果.未入科,function(t){return i("div",{key:"未入科"+t.日期,staticClass:"item-box item-one",style:"left:"+t.leftWidth+"px",attrs:{width:"10"}},[i("el-tooltip",{attrs:{content:t.日期+",未入科："+t.人数+"人",placement:"bottom",effect:"light"}},[i("a",{staticClass:"item-content",attrs:{href:"javascript:;"}})])],1)}),t._v(" "),t._l(e.row.统计轮转的结果.在科,function(t){return i("div",{key:"在科"+t.日期,staticClass:"item-box item-two",style:"left:"+t.leftWidth+"px",attrs:{width:"10"}},[i("el-tooltip",{attrs:{content:t.日期+",在科："+t.人数+"人",placement:"bottom",effect:"light"}},[i("a",{staticClass:"item-content",attrs:{href:"javascript:;"}})])],1)}),t._v(" "),t._l(e.row.统计轮转的结果.已出科,function(t){return i("div",{key:"已出科"+t.日期,staticClass:"item-box item-three",style:"left:"+t.leftWidth+"px",attrs:{width:"10"}},[i("el-tooltip",{attrs:{content:t.日期+",已出科："+t.人数+"人",placement:"bottom",effect:"light"}},[i("a",{staticClass:"item-content",attrs:{href:"javascript:;"}})])],1)})]}}])})})],2)],1):t._e(),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")])],1)])},[],!1,null,"504a29ba",null);u.options.__file="departmentReportStatistics.vue";e.default=u.exports},"od/H":function(t,e,i){"use strict";var a=i("K3Y6"),n={name:"UploadFile",props:["date","type","placeholder"],data:function(){return{time:[],pickerOptions:a.n}},mounted:function(){this.date?this.time=this.date:this.time=[]},methods:{changeTime:function(t){this.$emit("myEvent",t)}}},s=i("ZrdR"),r=Object(s.a)(n,function(){var t=this,e=t.$createElement;return(t._self._c||e)("el-date-picker",{staticClass:"filter-item",attrs:{type:t.type,align:"right","unlink-panels":"","range-separator":"至","start-placeholder":t.placeholder.start,"end-placeholder":t.placeholder.end,"picker-options":t.pickerOptions},on:{change:t.changeTime},model:{value:t.time,callback:function(e){t.time=e},expression:"time"}})},[],!1,null,null,null);r.options.__file="datePicker.vue";e.a=r.exports}}]);