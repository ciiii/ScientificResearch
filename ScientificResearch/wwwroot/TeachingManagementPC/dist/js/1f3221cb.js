(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-38d5"],{R77I:function(t,e,n){},VGr9:function(t,e,n){"use strict";n.r(e);var s=n("cLjf"),i=n.n(s),a=n("hDQ3"),r=n.n(a),o=n("YHGi"),l=n("K3Y6"),c={name:"addCorresponding",data:function(){return{list:[],req:{"教学本院策略编号":""},item:{},isLoad:!1,listLoading:!0,majorDepartments:[],departments:[],model:{Id:0,List:[]}}},mounted:function(){sessionStorage.getItem("info")&&(this.info=JSON.parse(sessionStorage.getItem("info")),this.model.Id=this.info.教学本院策略编号,this.req.教学本院策略编号=this.info.教学本院策略编号,this.getList(),this.getMajorDepartment(this.info.教学专业编号),this.getDepartment(),this.isLoad=!0)},methods:{cancelHandler:function(){this.$emit("myEvent",!1)},getList:function(){var t=r()(i.a.mark(function t(){var e;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myGet(o.k.GET_HOSPITAL_DEPARTMENT,this.req);case 2:(e=t.sent)&&e.length>0?this.model.List=e:this.model.List=[],this.listLoading=!1,this.isLoad=!0;case 6:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),getMajorDepartment:function(){var t=r()(i.a.mark(function t(e){var n,s;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={"教学专业编号":e},t.next=3,this.$http.myGet(o.k.GET_MAJOR_DEPARTMENT,n);case 3:(s=t.sent)&&s.length>0&&(this.majorDepartments=s);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),changeMajorDepartment:function(t,e){this.majorDepartments.find(function(n){n.编号==t&&(e.培训时长=n.最低培训时长,e.最低管床数量=n.最低管床数量,e.最低全程管理数量=n.最低全程管理数量)})},getDepartment:function(){var t=r()(i.a.mark(function t(){var e,n;return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return e={"是否启用":!0,"是否教学科室":!0},t.next=3,this.$http.myGet(o.i.GET_TEACHING_DEPARTMENT_LIST,e);case 3:(n=t.sent)&&n.length>0&&(this.departments=n);case 5:case"end":return t.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}(),addData:function(){this.model.List.push({"编号":0,"排序值":0,"教学专业科室编号":"","本院科室编号":"","是否必选":!0,"培训时长":0,"最低管床数量":0,"最低全程管理数量":0,"备注":""})},confirmHandler:Object(l.a)(function(){if(0==this.model.List.length)return this.$message.error("至少添加一项要求！"),!1;for(var t=0;t<this.model.List.length;t++){if(!this.model.List[t].培训时长){this.$message.error("第（"+(t+1)+"）行，请输入培训时长！");break}if(!this.model.List[t].最低管床数量){this.$message.error("第（"+(t+1)+"）行，请输入最低管床数量！");break}}this.addOrEditAsk(this.model)},300),addOrEditAsk:function(){var t=r()(i.a.mark(function t(e){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(o.k.POST_ADD_EDIT_STRATEGY_DEPARTMENT,e);case 2:this.$message.success("提交成功！"),this.$router.push({path:"/departmentMatching"});case 4:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),btnRemove:function(t,e){0==e.编号?this.model.List.splice(t,1):this.delAsk(t,[e.编号])},delAsk:function(){var t=r()(i.a.mark(function t(e,n){return i.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.$http.myPost(o.k.POST_DELETE_STRATEGY_DEPARTMENT,n);case 2:this.$message.success("提交成功！"),this.model.List.splice(e,1);case 4:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}},u=(n("zuiz"),n("ZrdR")),p=Object(u.a)(c,function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.isLoad?n("div",{staticClass:"app-container page-common page-addStudent"},[t._m(0),t._v(" "),n("div",{staticClass:"btn-back-box"},[n("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(e){t.$router.go(-1)}}},[n("i",{staticClass:"iconfont iconfanhui"}),t._v(" 返回\n    ")])],1),t._v(" "),n("div",{staticClass:"title-box"},[n("i",{staticClass:"iconfont iconkeshikucunguanli"}),n("span",[t._v(" "+t._s(t.info.专业名称)+" ( 策略："+t._s(t.info.策略名称)+")")]),t._v(" "),n("el-button",{attrs:{size:"small",type:"success"},on:{click:t.addData}},[n("i",{staticClass:"iconfont icontianjia"}),t._v(" 添加科室对应")])],1),t._v(" "),n("div",[n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.model.List,border:"",fit:"","highlight-current-row":"",stripe:""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"90",prop:"number"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.$index+1))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"标准科室",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择",size:"small"},on:{change:function(n){t.changeMajorDepartment(t.value,e.row)}},model:{value:e.row.教学专业科室编号,callback:function(n){t.$set(e.row,"教学专业科室编号",n)},expression:"scope.row.教学专业科室编号"}},t._l(t.majorDepartments,function(t){return n("el-option",{key:t.编号,attrs:{label:t.科室名称,value:t.编号}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"本院科室",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.row.本院科室编号,callback:function(n){t.$set(e.row,"本院科室编号",n)},expression:"scope.row.本院科室编号"}},t._l(t.departments,function(t){return n("el-option",{key:t.编号,attrs:{label:t.名称,value:t.编号}})}))]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"是否必选",align:"center",width:"150px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-switch",{staticClass:"switch",staticStyle:{display:"block"},attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-text":"是"},model:{value:e.row.是否必选,callback:function(n){t.$set(e.row,"是否必选",n)},expression:"scope.row.是否必选"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"培训时长（周）",align:"center",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"number",size:"small"},model:{value:e.row.培训时长,callback:function(n){t.$set(e.row,"培训时长",n)},expression:"scope.row.培训时长"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"管床数量（例）",align:"center",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"number",size:"small"},model:{value:e.row.最低管床数量,callback:function(n){t.$set(e.row,"最低管床数量",n)},expression:"scope.row.最低管床数量"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"全程管理（例）",align:"center",width:"110px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"number",size:"small"},model:{value:e.row.最低全程管理数量,callback:function(n){t.$set(e.row,"最低全程管理数量",n)},expression:"scope.row.最低全程管理数量"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"备注",align:"center",prop:"备注"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-input",{attrs:{type:"textarea"},model:{value:e.row.备注,callback:function(n){t.$set(e.row,"备注",n)},expression:"scope.row.备注"}})]}}])}),t._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center",width:"100px"},scopedSlots:t._u([{key:"default",fn:function(e){return[n("el-button",{attrs:{size:"mini",type:"danger",icon:"el-icon-delete"},on:{click:function(n){t.btnRemove(e.$index,e.row)}}},[t._v("删除\n          ")])]}}])})],1)],1),t._v(" "),t.model.List.length>0?n("div",{staticClass:"dialog-footer footer-box",attrs:{slot:"footer"},slot:"footer"},[n("el-button",{on:{click:function(e){t.$router.go(-1)}}},[t._v("返回")]),t._v(" "),n("el-button",{attrs:{type:"primary"},on:{click:t.confirmHandler}},[t._v("提 交")])],1):t._e()]):t._e()},[function(){var t=this.$createElement,e=this._self._c||t;return e("span",{staticClass:"title"},[e("i",{staticClass:"iconfont icon-set"}),this._v(" 设置本院科室对应：")])}],!1,null,"fe5705f6",null);p.options.__file="setCorresponding.vue";e.default=p.exports},zuiz:function(t,e,n){"use strict";var s=n("R77I");n.n(s).a}}]);