(window.webpackJsonp=window.webpackJsonp||[]).push([["chunk-b4a0"],{"21uc":function(e,t,s){"use strict";var i=s("AFLT");s.n(i).a},"2N3l":function(e,t,s){},"4iTn":function(e,t,s){},"9gBL":function(e,t,s){"use strict";var i=s("4iTn");s.n(i).a},AFLT:function(e,t,s){},O9b1:function(e,t,s){"use strict";var i=s("2N3l");s.n(i).a},"P+wg":function(e,t,s){"use strict";var i=s("bDxQ");s.n(i).a},Z2Xp:function(e,t,s){},bDxQ:function(e,t,s){},jv7G:function(e,t,s){"use strict";s.r(t);var i=s("cLjf"),n=s.n(i),a=s("hDQ3"),r=s.n(a),l=s("YHGi"),o=s("K3Y6"),c=s("u/cs"),u=s("glbJ"),h=s("jThu"),p={name:"selectUserTable",props:["selectArr"],components:{cascaderDepartment:s("xDfy").a},data:function(){return{req:{Index:1,Size:10,OrderType:!1,"部门编号":"",LikeAllName:""},list:[],multipleSelection:[],newSelection:[],types:[],majors:[],total:0,loading:!1,listLoading:!0,isLoad:!0,http:l.a,getRowKeys:function(e){return e.编号},isFirst:!0}},mounted:function(){this.listLoading=!0,this.getList()},methods:{getList:function(){var e=r()(n.a.mark(function e(){var t,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myGet(l.n.GET_ENABLE_PAGING_ALL_USER,this.req);case 2:(t=e.sent)&&t.list.length>0?(this.total=t.total,t=t.list,s=(this.req.Index-1)*this.req.Size+1,t.forEach(function(e){e.number=s,s++}),this.list=t):(this.list=[],this.total=0),this.listLoading=!1,this.isLoad=!0;case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),btnBatchReport:function(){0==this.multipleSelection.length?this.$message.error("请先勾选人员！"):this.$emit("myEvent",this.multipleSelection)},onSearch:function(){this.req.Index=1,this.listLoading=!0,this.list=[],this.getList()},getDepartmentMyEvent:function(e){this.req.部门编号=e,this.onSearch()},handleSelectionChange:function(e){var t=this;this.multipleSelection=[],e&&e.forEach(function(e){e&&t.multipleSelection.push(e)}),console.info("this.multipleSelection---"),console.info(this.multipleSelection)},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){this.req.Index=e,this.getList()}}},d=(s("9gBL"),s("ZrdR")),f=Object(d.a)(p,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"details"},[s("div",{staticClass:"filter-container"},[s("el-button",{staticClass:"filter-item",attrs:{type:"success",size:"small"},on:{click:e.btnBatchReport}},[s("i",{staticClass:"iconfont iconyanshoutongguo"}),e._v(" 确定选择\n    ")]),e._v(" "),s("el-input",{staticClass:"filter-item",staticStyle:{width:"150px"},attrs:{placeholder:"请输入姓名","prefix-icon":"el-icon-search"},nativeOn:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.onSearch(t):null}},model:{value:e.req.LikeAllName,callback:function(t){e.$set(e.req,"LikeAllName",t)},expression:"req.LikeAllName"}}),e._v(" "),s("div",{staticClass:"filter-item"},[e._v("\n      所属科室\n      "),e.isLoad?s("cascaderDepartment",{ref:"child",attrs:{departmentId:e.req.部门编号},on:{myEvent:e.getDepartmentMyEvent}}):e._e()],1),e._v(" "),s("el-button",{staticClass:"filter-item",attrs:{type:"primary",size:"small",icon:"el-icon-search"},on:{click:e.onSearch}},[e._v("查询")])],1),e._v(" "),s("div",{staticClass:"content"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"multipleTable",staticClass:"tableone",attrs:{data:e.list,"element-loading-text":"Loading",stripe:"","row-key":e.getRowKeys},on:{"selection-change":e.handleSelectionChange}},[s("el-table-column",{attrs:{type:"selection",align:"center",width:"50","reserve-selection":!0,prop:"编号"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"序号",prop:"number",width:"60"}}),e._v(" "),s("el-table-column",{attrs:{label:"姓名",prop:"姓名"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"工号",prop:"工号"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"部门名称",prop:"部门名称"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"手机",prop:"手机"}}),e._v(" "),s("el-table-column",{attrs:{align:"center",label:"职务名称",prop:"职务名称"}})],1),e._v(" "),s("div",{staticClass:"block paging"},[s("el-pagination",{attrs:{"current-page":e.req.Index,"page-size":e.req.Size,background:"",layout:"total, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.req,"Index",t)}}})],1)],1)])},[],!1,null,"2eea5520",null);f.options.__file="selectUserTable.vue";var m=f.exports,v=s("T3XZ"),g={name:"selectDepartment",props:["selectArr"],data:function(){return{defaultProps:{children:"children",label:"名称",isLeaf:"上级部门编号"},choosedRole:[],list:[]}},mounted:function(){this.getDepartment()},methods:{cancelHandler:function(){this.$emit("myEvent",!1)},getDepartment:function(){var e=r()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myGet(l.i.GET_ENABLE_DEPARTMENT_LIST,"");case 2:(t=e.sent)&&t.length>0?(this.list=Object(o.d)(t,"编号","上级部门编号"),this.choosedRole=this.selectArr):this.list=[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),handleNodeClick:function(e,t,s){t.checked=!t.checked,this.isChildNodes(t)},isChildNodes:function(e){var t=this;e.childNodes.length>0&&e.childNodes.forEach(function(e){e.checked=!e.checked,t.isChildNodes(e)})},getCheckedNodes:function(){var e=this.$refs.tree.getCheckedNodes();this.$emit("myEvent",e)}}},b=(s("21uc"),Object(d.a)(g,function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"department-box"},[t("el-tree",{ref:"tree",attrs:{data:this.list,"show-checkbox":"","node-key":"编号","default-expand":"","default-expanded-keys":this.choosedRole,"default-checked-keys":this.choosedRole,props:this.defaultProps},on:{"node-click":this.handleNodeClick,"check-change":this.getCheckedNodes}})],1)},[],!1,null,"8cf69fb2",null));b.options.__file="treeDepartmentMultiple.vue";var _=b.exports,y={name:"",props:["selectArr"],data:function(){return{roles:[],newSelectRoles:[]}},mounted:function(){this.newSelectRoles=this.selectArr,this.getRoles()},methods:{getRoles:function(){var e=r()(n.a.mark(function e(){var t;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myGet(l.j.GET_ROLE_LIST,"");case 2:(t=e.sent)&&t.length>0?this.roles=t:this.roles=[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),changeSelect:function(e){this.$emit("myEvent",e)}}},k=(s("O9b1"),Object(d.a)(y,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("el-select",{staticStyle:{display:"block"},attrs:{multiple:"",placeholder:"请选择(可多个)"},on:{change:e.changeSelect},model:{value:e.newSelectRoles,callback:function(t){e.newSelectRoles=t},expression:"newSelectRoles"}},e._l(e.roles,function(e){return s("el-option",{key:e.编号,attrs:{label:e.名称,value:e.编号}})}))},[],!1,null,"6258aa94",null));k.options.__file="selectRoleMultiple.vue";var E=k.exports,S={name:"addNotice",components:{selectDateAfter:c.a,Tinymce:u.a,uploadFileOrImg:h.a,selectUserTable:m,selectStudentTable:v.a,treeDepartmentMultiple:_,selectRoleMultiple:E},data:function(){return{form:{"编号":0,"通知类型":"","发送人编号":0,"发送人姓名":"","通知名称":"","关闭时间":"","相关文件路径":"","通知内容":"","是否启用":!0,"建立时间":Object(o.h)(new Date,"yyyy-MM-dd"),"备注":"","是否必读":!0},List:[],rules:{"通知名称":[{required:!0,message:"请输入通知名称！",trigger:"blur"}],"通知类型":[{required:!0,message:"请选择通知类型！",trigger:"blur"}],"关闭时间":[{required:!0,message:"请选择关闭时间！",trigger:"blur"}],"通知内容":[{required:!0,message:"请填写通知内容！",trigger:"blur"}]},url:Object(o.m)(l.a+l.h.POST_UPLOAD_NOTICE_IMG),types:[],peopleType:"人员",isDialog:!1,isAdd:!0,isLoad:!1,isShow:!1,isUser:!1,departments:"",selectUsers:[],selectStudents:[],selectdepartments:[],selectRoles:[],files:[],title:"",userNames:"",studentNames:""}},directives:{clickoutside:o.e},mounted:function(){if(sessionStorage.getItem("itemData")){var e=JSON.parse(sessionStorage.getItem("itemData"));if(this.isAdd=e.isAdd,this.isAdd){if(this.$route.meta.title="添加通知",localStorage.getItem("userInfo")){var t=JSON.parse(localStorage.getItem("userInfo")).人员;this.form.发送人编号=t.编号,this.form.发送人姓名=t.姓名}this.isLoad=!0}else{this.$route.meta.title="修改通知";var s=e.item;this.getDetails(s.编号)}this.getTypes()}},methods:{getTypes:function(){var e=r()(n.a.mark(function e(){var t,s;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={"分类":"通知类型"},e.next=3,this.$http.myGet(l.f.GET_TYPE_DICTIONARY,t);case 3:(s=e.sent)&&s.length>0&&(this.types=s.reverse());case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),getDetails:function(){var e=r()(n.a.mark(function e(t){var s,i;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return s={"编号":t},e.next=3,this.$http.myGet(l.h.GET_NOTICE_DETAILS,s);case 3:(i=e.sent)&&i.通知公告&&(this.form=i.通知公告,this.List=i.接收条件,this.form&&""!=this.form.相关文件路径&&(this.files=this.form.相关文件路径.split(",")),this.List&&this.List.length>0&&(this.peopleType=this.List[0].接收者类型,this.getSelectArr(this.peopleType)),this.isLoad=!0);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getNameArr:function(){var e=[];return this.List.forEach(function(t){e.push(t.接收者名称)}),e},getSelectArr:function(e){var t=[];switch(this.List.forEach(function(e){t.push(e.接收者编号)}),e){case"人员":this.selectUsers=t;var s=this.getNameArr();this.userNames=s.join();break;case"教学学员":this.selectStudents=t;var i=this.getNameArr();this.studentNames=i.join();break;case"部门":this.selectdepartments=t;var n=[];this.List.forEach(function(e){n.push(e.接收者名称)}),this.departments=n.join();break;case"教学角色":this.selectRoles=t}},clickUser:function(){this.title="选择人员",this.isDialog=!0,this.isUser=!0},clickStudent:function(){this.title="选择学员",this.isDialog=!0,this.isUser=!1},handleClose:function(e){this.isShow=!1},myGetDate:function(e){this.form.关闭时间=e},myEventFiles:function(e){this.files.push(e)},removeFile:function(e){this.files.splice(this.files.findIndex(function(t){return t==e}),1)},getArr:function(){var e=this,t=[],s=[];switch(this.peopleType){case"人员":t=this.selectUsers;break;case"教学学员":t=this.selectStudents;break;case"部门":t=this.selectdepartments;break;case"教学角色":t=this.selectRoles}t.forEach(function(t){var i={"编号":0,"接收者类型":e.peopleType,"接收者编号":t};s.push(i)}),this.List=s},confirmHandler:Object(o.a)(function(){var e=this;this.$refs.form.validate(function(t){if(!t)return e.$message.error("信息有误！"),!1;if(e.getArr(),!e.List||0==e.List.length)return e.$message.error("请选择"+e.peopleType+"接受者！"),!1;e.files&&e.files.length>0&&(e.form.相关文件路径=e.files.join());var s={Model:e.form,List:e.List};e.addEditNotice(s)})},300),addEditNotice:function(){var e=r()(n.a.mark(function e(t){return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myPost(l.h.POST_ADD_OR_EDIT_NOTICE,t);case 2:this.$message.success("提交成功！"),this.$router.push({path:"/notice"});case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),getMyEventUsers:function(e){var t=this;this.isDialog=!1,this.selectUsers=[];var s=[];e.forEach(function(e){s.push(e.姓名),t.selectUsers.push(e.编号)}),this.userNames=s.join()},getMyEventStudents:function(e){var t=this;this.isDialog=!1,this.selectStudents=[];var s=[];e.forEach(function(e){s.push(e.姓名),t.selectStudents.push(e.编号)}),this.studentNames=s.join()},getMyEventDepartment:function(e){var t=[],s=[];e.forEach(function(e){t.push(e.名称),s.push(e.编号)}),this.departments=t.join(),this.selectdepartments=s},getMyEventRoles:function(e){this.selectRoles=e}}},x=(s("zBEH"),Object(d.a)(S,function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app-container page-common page-addStudent"},[s("div",{staticClass:"btn-back-box"},[s("el-button",{staticClass:"btn-back",attrs:{type:"primary",size:"mini",plain:""},on:{click:function(t){e.$router.go(-1)}}},[s("i",{staticClass:"iconfont iconfanhui"}),e._v(" 返回\n    ")])],1),e._v(" "),e.isLoad?s("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"120px",size:"small"}},[s("el-form-item",{staticClass:"el-form-item-block",attrs:{label:"通知名称",prop:"通知名称"}},[s("el-input",{model:{value:e.form.通知名称,callback:function(t){e.$set(e.form,"通知名称",t)},expression:"form.通知名称"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"通知类型",prop:"通知类型"}},[s("el-select",{attrs:{placeholder:"请选择",width:"80%"},model:{value:e.form.通知类型,callback:function(t){e.$set(e.form,"通知类型",t)},expression:"form.通知类型"}},e._l(e.types,function(e){return s("el-option",{key:e.编号,attrs:{label:e.值,value:e.值}})}))],1),e._v(" "),s("el-form-item",{attrs:{label:"发布人"}},[s("el-input",{attrs:{disabled:""},model:{value:e.form.发送人姓名,callback:function(t){e.$set(e.form,"发送人姓名",t)},expression:"form.发送人姓名"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"关闭时间",prop:"关闭时间"}},[s("selectDateAfter",{ref:"date",attrs:{date:e.form.关闭时间,type:"date",format:"yyyy-MM-dd",title:"选择日期"},on:{myEvent:e.myGetDate}})],1),e._v(" "),s("el-form-item",{attrs:{label:"是否必读",prop:"是否必读"}},[s("el-radio-group",{model:{value:e.form.是否必读,callback:function(t){e.$set(e.form,"是否必读",t)},expression:"form.是否必读"}},[s("el-radio",{attrs:{label:!0}},[e._v("是")]),e._v(" "),s("el-radio",{attrs:{label:!1}},[e._v("否")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"接收者类型"}},[s("el-radio-group",{model:{value:e.peopleType,callback:function(t){e.peopleType=t},expression:"peopleType"}},[s("el-radio",{attrs:{label:"人员"}},[e._v("人员")]),e._v(" "),s("el-radio",{attrs:{label:"教学学员"}},[e._v("教学学员")]),e._v(" "),s("el-radio",{attrs:{label:"部门"}},[e._v("部门")]),e._v(" "),s("el-radio",{attrs:{label:"教学角色"}},[e._v("教学角色")])],1)],1),e._v(" "),"人员"==e.peopleType?s("el-form-item",{attrs:{label:"配置接收人"}},[s("el-input",{attrs:{readonly:""},model:{value:e.userNames,callback:function(t){e.userNames=t},expression:"userNames"}}),e._v(" "),s("el-button",{on:{click:e.clickUser}},[e._v("选择人员")])],1):e._e(),e._v(" "),"教学学员"==e.peopleType?s("el-form-item",{attrs:{label:"配置接收学员"}},[s("el-input",{attrs:{readonly:""},model:{value:e.studentNames,callback:function(t){e.studentNames=t},expression:"studentNames"}}),e._v(" "),s("el-button",{on:{click:e.clickStudent}},[e._v("选择学员")])],1):e._e(),e._v(" "),"部门"==e.peopleType?s("el-form-item",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:e.handleClose,expression:"handleClose"}],attrs:{label:"配置接收部门"}},[s("el-input",{on:{focus:function(t){e.isShow=!0}},model:{value:e.departments,callback:function(t){e.departments=t},expression:"departments"}}),e._v(" "),e.isShow?s("treeDepartmentMultiple",{ref:"child",attrs:{selectArr:e.selectdepartments},on:{myEvent:e.getMyEventDepartment}}):e._e()],1):e._e(),e._v(" "),"教学角色"==e.peopleType?s("el-form-item",{attrs:{label:"配置接收角色"}},[e.isLoad?s("selectRoleMultiple",{ref:"child",attrs:{selectArr:e.selectRoles},on:{myEvent:e.getMyEventRoles}}):e._e()],1):e._e(),e._v(" "),s("el-form-item",{staticClass:"uploadFile-box",attrs:{label:"相关文件路径",prop:"相关文件路径"}},[s("uploadFileOrImg",{attrs:{url:e.url,files:e.files},on:{myEvent:e.myEventFiles,removeFile:e.removeFile}})],1),e._v(" "),s("el-form-item",{staticClass:"el-form-item-block",attrs:{label:"通知内容",prop:"通知内容"}},[s("tinymce",{attrs:{height:400},model:{value:e.form.通知内容,callback:function(t){e.$set(e.form,"通知内容",t)},expression:"form.通知内容"}})],1)],1):e._e(),e._v(" "),s("div",{staticClass:"dialog-footer footer-box",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.$router.go(-1)}}},[e._v("返回")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.confirmHandler}},[e._v("确 定")])],1),e._v(" "),e.isDialog?s("el-dialog",{staticClass:"big-dialog common-dialog",attrs:{title:e.title,visible:e.isDialog,"close-on-click-modal":!1,width:"30%"},on:{"update:visible":function(t){e.isDialog=t}}},[e.isUser?s("selectUserTable",{ref:"child",attrs:{selectArr:e.selectUsers},on:{myEvent:e.getMyEventUsers}}):s("selectStudentTable",{ref:"child",attrs:{selectArr:e.selectStudents},on:{myEvent:e.getMyEventStudents}})],1):e._e()],1)},[],!1,null,"3a3504e4",null));x.options.__file="addNotice.vue";t.default=x.exports},"u/cs":function(e,t,s){"use strict";var i={name:"UploadFile",props:["date","type","format","title","dateTime"],data:function(){return{time:"",pickerOptionsStart:{}}},mounted:function(){this.date?"year"==this.type?this.time=this.date.toString():this.time=new Date(this.date):this.time="",this.pickerOptions()},methods:{changeDate:function(e){this.$emit("myEvent",e)},pickerOptions:function(){if(this.date&&""!=this.date){var e=this;this.pickerOptionsStart={disabledDate:function(t){return t.getTime()<new Date(e.date).getTime()}}}else this.pickerOptionsStart={disabledDate:function(e){return e.getTime()<Date.now()-864e5}}}}},n=s("ZrdR"),a=Object(n.a)(i,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-date-picker",{attrs:{type:e.type,format:e.format,"value-format":e.format,placeholder:e.title,"picker-options":e.pickerOptionsStart},on:{change:e.changeDate},model:{value:e.time,callback:function(t){e.time=t},expression:"time"}})},[],!1,null,null,null);a.options.__file="selectDateAfter.vue";t.a=a.exports},xDfy:function(e,t,s){"use strict";var i=s("cLjf"),n=s.n(i),a=s("hDQ3"),r=s.n(a),l=s("YHGi"),o=s("K3Y6"),c={name:"selectDepartment",props:["departmentId"],data:function(){return{selected:[],departments:[],req:{"是否启用":!0}}},mounted:function(){this.getDepartment()},methods:{getDepartment:function(){var e=r()(n.a.mark(function e(){var t,s=this;return n.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.$http.myGet(l.i.GET_ENABLE_DEPARTMENT_LIST,this.req);case 2:(t=e.sent)&&t.length>0?(t.forEach(function(e){e.label=e.名称,e.value=e.编号}),this.selected=[],t.find(function(e,i,n){e.编号==s.departmentId&&s.isPartent(t,e.上级部门编号)}),this.departments=Object(o.d)(t,"编号","上级部门编号"),this.selected.push(this.departmentId)):this.departments=[];case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),isPartent:function(e,t){var s=this;0!=t&&(this.selected.unshift(t),e.find(function(i,n,a){i.编号===t&&s.isPartent(e,i.上级部门编号)}))},handleChange:function(e){console.info(e[e.length-1]),this.$emit("myEvent",e[e.length-1])}}},u=(s("P+wg"),s("ZrdR")),h=Object(u.a)(c,function(){var e=this,t=e.$createElement;return(e._self._c||t)("el-cascader",{attrs:{options:e.departments,"show-all-levels":!1,clearable:""},on:{change:e.handleChange},model:{value:e.selected,callback:function(t){e.selected=t},expression:"selected"}})},[],!1,null,"ffe59ddc",null);h.options.__file="cascaderDepartment.vue";t.a=h.exports},zBEH:function(e,t,s){"use strict";var i=s("Z2Xp");s.n(i).a}}]);