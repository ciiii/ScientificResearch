(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-e8aefe72"],{"4f1b":function(t,e,i){},"67bb":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("van-cell-group",[i("van-field",{attrs:{label:"学员姓名:",readonly:""},model:{value:t.data.学员姓名,callback:function(e){t.$set(t.data,"学员姓名",e)},expression:"data.学员姓名"}}),i("van-field",{attrs:{label:"本院科室:",readonly:""},model:{value:t.data.本院科室名称,callback:function(e){t.$set(t.data,"本院科室名称",e)},expression:"data.本院科室名称"}}),t.loading?t._e():i("select-picker",{attrs:{required:!0,label:"处理类别:",data:t.list},model:{value:t.submitForm.typename,callback:function(e){t.$set(t.submitForm,"typename",e)},expression:"submitForm.typename"}}),i("date-time",{attrs:{type:"date",required:!0,label:"处理日期:"},model:{value:t.submitForm.createTime,callback:function(e){t.$set(t.submitForm,"createTime",e)},expression:"submitForm.createTime"}}),i("van-uploader",{attrs:{"after-read":t.uploadAttachment,multiple:"","upload-text":"上传附件"},model:{value:t.fileList,callback:function(e){t.fileList=e},expression:"fileList"}}),i("van-field",{attrs:{label:"处理原因:",type:"textarea",row:"2",required:""},model:{value:t.submitForm.handelReason,callback:function(e){t.$set(t.submitForm,"handelReason",e)},expression:"submitForm.handelReason"}}),i("van-field",{attrs:{label:"处理意见:",type:"textarea",row:"2",required:""},model:{value:t.submitForm.handelResult,callback:function(e){t.$set(t.submitForm,"handelResult",e)},expression:"submitForm.handelResult"}})],1),i("van-submit-bar",{attrs:{"decimal-length":0,currency:"","button-text":"提交"},on:{submit:t.onSubmit}})],1)},n=[],s=(i("f763"),i("7bc1"),i("a506")),o=(i("2525"),i("f268"),i("3c35"),i("b044"),i("b20f"),i("4f1b"),i("cfd9"),i("f9c5")),r=i("40c3"),c=i("81ca");function h(t){return Array.isArray(t)?t:[t]}function u(t,e){return new Promise(function(i){var a=new FileReader;a.onload=function(t){i(t.target.result)},"dataUrl"===e?a.readAsDataURL(t):"text"===e&&a.readAsText(t)})}function l(t,e){return h(t).some(function(t){return t.size>e})}var d=["jpeg","jpg","gif","png","svg"];function f(t){return d.some(function(e){return-1!==t.indexOf("."+e)})}function m(t){return t.file&&t.file.type?0===t.file.type.indexOf("image"):t.url?f(t.url):!!t.content&&0===t.content.indexOf("data:image")}var p=i("9481"),v=i("a31c"),b=i("6e6d"),g=i("23c4"),w=i.n(g),y=i("0dfe"),S=i("b1d9"),x=i("d612"),T=i("17a5"),O=i("5a37"),z=i("9c78"),$=i("e4cc"),C=Object(r["a"])("image-preview"),F=C[0],j=C[1];function M(t){return Math.sqrt(Math.abs((t[0].clientX-t[1].clientX)*(t[0].clientY-t[1].clientY)))}var k,I=F({mixins:[x["a"],T["a"],O["a"]],props:{className:null,lazyLoad:Boolean,asyncClose:Boolean,showIndicators:Boolean,images:{type:Array,default:function(){return[]}},loop:{type:Boolean,default:!0},swipeDuration:{type:Number,default:500},overlay:{type:Boolean,default:!0},showIndex:{type:Boolean,default:!0},startPosition:{type:Number,default:0},minZoom:{type:Number,default:1/3},maxZoom:{type:Number,default:3},overlayClass:{type:String,default:j("overlay")},closeOnClickOverlay:{type:Boolean,default:!0}},data:function(){return this.bindStatus=!1,{scale:1,moveX:0,moveY:0,moving:!1,zooming:!1,active:0,doubleClickTimer:null}},computed:{imageStyle:function(){var t=this.scale,e={transition:this.zooming||this.moving?"":".3s all"};return 1!==t&&(e.transform="scale3d("+t+", "+t+", 1) translate("+this.moveX/t+"px, "+this.moveY/t+"px)"),e}},watch:{value:function(){this.active=this.startPosition},startPosition:function(t){this.active=t}},methods:{onWrapperTouchStart:function(){this.touchStartTime=new Date},onWrapperTouchEnd:function(t){var e=this;Object(S["c"])(t);var i=new Date-this.touchStartTime,a=this.$refs.swipe||{},n=a.offsetX,s=void 0===n?0:n,o=a.offsetY,r=void 0===o?0:o;i<300&&s<10&&r<10&&(this.doubleClickTimer?(clearTimeout(this.doubleClickTimer),this.doubleClickTimer=null,this.toggleScale()):this.doubleClickTimer=setTimeout(function(){var t=e.active;e.resetScale(),e.$emit("close",{index:t,url:e.images[t]}),e.asyncClose||e.$emit("input",!1),e.doubleClickTimer=null},300))},startMove:function(t){var e=t.currentTarget,i=e.getBoundingClientRect(),a=window.innerWidth,n=window.innerHeight;this.touchStart(t),this.moving=!0,this.startMoveX=this.moveX,this.startMoveY=this.moveY,this.maxMoveX=Math.max(0,(i.width-a)/2),this.maxMoveY=Math.max(0,(i.height-n)/2)},startZoom:function(t){this.moving=!1,this.zooming=!0,this.startScale=this.scale,this.startDistance=M(t.touches)},onImageTouchStart:function(t){var e=t.touches,i=this.$refs.swipe||{},a=i.offsetX,n=void 0===a?0:a;1===e.length&&1!==this.scale?this.startMove(t):2!==e.length||n||this.startZoom(t)},onImageTouchMove:function(t){var e=t.touches;if((this.moving||this.zooming)&&Object(S["c"])(t,!0),this.moving){this.touchMove(t);var i=this.deltaX+this.startMoveX,a=this.deltaY+this.startMoveY;this.moveX=Object(y["a"])(i,-this.maxMoveX,this.maxMoveX),this.moveY=Object(y["a"])(a,-this.maxMoveY,this.maxMoveY)}if(this.zooming&&2===e.length){var n=M(e),s=this.startScale*n/this.startDistance;this.scale=Object(y["a"])(s,this.minZoom,this.maxZoom)}},onImageTouchEnd:function(t){if(this.moving||this.zooming){var e=!0;this.moving&&this.startMoveX===this.moveX&&this.startMoveY===this.moveY&&(e=!1),t.touches.length||(this.moving=!1,this.zooming=!1,this.startMoveX=0,this.startMoveY=0,this.startScale=1,this.scale<1&&this.resetScale()),e&&Object(S["c"])(t,!0)}},onSwipeChange:function(t){this.resetScale(),this.active=t,this.$emit("change",t)},resetScale:function(){this.scale=1,this.moveX=0,this.moveY=0},toggleScale:function(){var t=this.scale>1?1:2;this.scale=t,this.moveX=0,this.moveY=0}},render:function(){var t=this,e=arguments[0];if(this.value){var i=this.active,a=this.images,n=this.showIndex&&e("div",{class:j("index")},[this.slots("index")||i+1+"/"+a.length]),s=e(z["a"],{ref:"swipe",attrs:{loop:this.loop,duration:this.swipeDuration,indicatorColor:"white",initialSwipe:this.startPosition,showIndicators:this.showIndicators},on:{change:this.onSwipeChange}},[a.map(function(a,n){var s={class:j("image"),style:n===i?t.imageStyle:null,on:{touchstart:t.onImageTouchStart,touchmove:t.onImageTouchMove,touchend:t.onImageTouchEnd,touchcancel:t.onImageTouchEnd}};return e($["a"],[t.lazyLoad?e("img",w()([{directives:[{name:"lazy",value:a}]},s])):e("img",w()([{attrs:{src:a}},s]))])})]);return e("transition",{attrs:{name:"van-fade"}},[e("div",{class:[j(),this.className],on:{touchstart:this.onWrapperTouchStart,touchMove:S["c"],touchend:this.onWrapperTouchEnd,touchcancel:this.onWrapperTouchEnd}},[s,n])])}}}),R=i("46c5"),A={images:[],loop:!0,swipeDuration:500,value:!0,minZoom:1/3,maxZoom:3,className:"",onClose:null,onChange:null,lazyLoad:!1,showIndex:!0,asyncClose:!1,startPosition:0,showIndicators:!1,closeOnPopstate:!1},X=function(){k=new(b["a"].extend(I))({el:document.createElement("div")}),document.body.appendChild(k.$el),k.$on("change",function(t){k.onChange&&k.onChange(t)})},P=function(t,e){if(void 0===e&&(e=0),!R["d"]){k||X();var i=Array.isArray(t)?{images:t,startPosition:e}:t;return Object(o["a"])(k,A,i),k.$once("input",function(t){k.value=t}),i.onClose&&k.$once("close",i.onClose),k}};P.install=function(){b["a"].use(I)};var Y,L=P,E=Object(r["a"])("uploader"),N=E[0],D=E[1],B=N({inheritAttrs:!1,model:{prop:"fileList"},props:{disabled:Boolean,uploadText:String,afterRead:Function,beforeRead:Function,previewSize:[Number,String],name:{type:[Number,String],default:""},accept:{type:String,default:"image/*"},fileList:{type:Array,default:function(){return[]}},maxSize:{type:Number,default:Number.MAX_VALUE},maxCount:{type:Number,default:Number.MAX_VALUE},previewImage:{type:Boolean,default:!0},resultType:{type:String,default:"dataUrl"}},computed:{detail:function(){return{name:this.name}},previewSizeWithUnit:function(){return Object(c["a"])(this.previewSize)}},methods:{onChange:function(t){var e=this,i=t.target.files;if(!this.disabled&&i.length){if(i=1===i.length?i[0]:[].slice.call(i),this.beforeRead){var a=this.beforeRead(i,this.detail);if(!a)return void this.resetInput();if(a.then)return void a.then(function(){e.readFile(i)}).catch(this.resetInput)}this.readFile(i)}},readFile:function(t){var e=this,i=l(t,this.maxSize);if(Array.isArray(t)){var a=this.maxCount-this.fileList.length;t.length>a&&(t=t.slice(0,a)),Promise.all(t.map(function(t){return u(t,e.resultType)})).then(function(a){var n=t.map(function(t,e){return{file:t,content:a[e]}});e.onAfterRead(n,i)})}else u(t,this.resultType).then(function(a){e.onAfterRead({file:t,content:a},i)})},onAfterRead:function(t,e){e?this.$emit("oversize",t,this.detail):(this.resetInput(),this.$emit("input",[].concat(this.fileList,h(t))),this.afterRead&&this.afterRead(t,this.detail))},onDelete:function(t,e){var i=this.fileList.slice(0);i.splice(e,1),this.$emit("input",i),this.$emit("delete",t)},resetInput:function(){this.$refs.input&&(this.$refs.input.value="")},onPreviewImage:function(t){var e=this.fileList.filter(function(t){return m(t)}).map(function(t){return t.content||t.url});L({images:e,startPosition:e.indexOf(t.content||t.url)})},renderPreview:function(){var t=this,e=this.$createElement;if(this.previewImage)return this.fileList.map(function(i,a){return e("div",{class:D("preview")},[m(i)?e(v["a"],{attrs:{fit:"cover",src:i.content||i.url,width:t.previewSize,height:t.previewSize},class:D("preview-image"),on:{click:function(){t.onPreviewImage(i)}}}):e("div",{class:D("file"),style:{width:t.previewSizeWithUnit,height:t.previewSizeWithUnit}},[e(p["a"],{class:D("file-icon"),attrs:{name:"description"}}),e("div",{class:[D("file-name"),"van-ellipsis"]},[i.file?i.file.name:i.url])]),e(p["a"],{attrs:{name:"delete"},class:D("preview-delete"),on:{click:function(){t.onDelete(i,a)}}})])})},renderUpload:function(){var t=this.$createElement;if(!(this.fileList.length>=this.maxCount)){var e,i=this.slots(),a=t("input",{attrs:Object(o["a"])({},this.$attrs,{type:"file",accept:this.accept,disabled:this.disabled}),ref:"input",class:D("input"),on:{change:this.onChange}});if(i)return t("div",{class:D("input-wrapper")},[i,a]);if(this.previewSize){var n=this.previewSizeWithUnit;e={width:n,height:n}}return t("div",{class:D("upload"),style:e},[t(p["a"],{attrs:{name:"plus"},class:D("upload-icon")}),this.uploadText&&t("span",{class:D("upload-text")},[this.uploadText]),a])}}},render:function(){var t=arguments[0];return t("div",{class:D()},[t("div",{class:D("wrapper")},[this.renderPreview(),this.renderUpload()])])}}),W=(i("a1fd"),i("dfab3")),U=(i("05e8"),i("4117")),Z=(i("b09f"),i("9254")),q=(i("061c"),i("e5bc")),H=(i("cc77"),i("4b2a")),_=i("5dee"),J=i("2a7b"),V=i("e1d4"),G=i("785a"),K={components:(Y={},Object(s["a"])(Y,H["a"].name,H["a"]),Object(s["a"])(Y,q["a"].name,q["a"]),Object(s["a"])(Y,Z["a"].name,Z["a"]),Object(s["a"])(Y,U["a"].name,U["a"]),Object(s["a"])(Y,W["a"].name,W["a"]),Object(s["a"])(Y,B.name,B),Object(s["a"])(Y,"SelectPicker",V["a"]),Object(s["a"])(Y,"DateTime",_["a"]),Y),props:{data:{},callback:{type:Function,default:function(){}}},data:function(){return{loading:!0,fileList:[],submitForm:{id:0,turnid:0,createTime:(new Date).format("yyyy-MM-dd"),typename:"",handelReason:"",handelResult:"",attachment:"",remark:""},list:[]}},mounted:function(){var t=this;if(this.submitForm.turnid=this.data.编号,this.submitForm.oldteacherid=this.data.带教老师编号,this.data.处理类别&&(this.submitForm.typename=this.data.处理类别,this.submitForm.id=this.data.编号,this.submitForm.turnid=this.data.教学轮转编号),this.data.处理日期&&(this.submitForm.createTime=this.data.处理日期.format("yyyy-MM-dd")),this.data.附件){var e=this.data.附件.split(",");e.forEach(function(e){t.fileList.push({path:e,file:{name:e.split("/")[e.split("/").length-1]}})}),this.submitForm.attachment=this.data.附件}this.data.处理原因&&(this.submitForm.handelReason=this.data.处理原因),this.data.处理意见&&(this.submitForm.handelResult=this.data.处理意见);var i=this;Object(G["c"])({type:"教学医疗事故处理类别"}).then(function(t){var e=t.data.data;e.forEach(function(t){i.list.push({value:t.值,text:t.值})}),i.loading=!1})},methods:{uploadAttachment:function(t){var e=this;Object(J["r"])(t.file).then(function(i){var a=i.data.data;e.fileList[e.fileList.indexOf(t)].path=a[0]})},onSubmit:function(){var t=this,e=this;if(""!=e.submitForm.turnid)if(""!=e.submitForm.typename)if(""!=e.submitForm.createTime)if(""!=e.submitForm.handelReason)if(""!=e.submitForm.typename){if(!e.submitForm.creator&&localStorage.getItem("personnel")){var i=JSON.parse(localStorage.getItem("personnel"));e.submitForm.creator=i.编号}this.submitForm.attachment=this.fileList.map(function(t){return t.path}).join(","),Object(J["l"])(e.submitForm).then(function(i){i.error||(e.$toast.success("操作成功"),t.callback())})}else e.$toast("请输入处理意见");else e.$toast("请输入处理原因");else e.$toast("请选择处理日期");else e.$toast("请选择处理类别");else e.$toast("轮转计划不存在")}}},Q=K,tt=i("6691"),et=Object(tt["a"])(Q,a,n,!1,null,null,null);e["a"]=et.exports},"9c78":function(t,e,i){"use strict";var a=i("40c3"),n=i("b1d9"),s=i("17a5"),o=i("f0e4"),r=i("9cd6"),c=i("0dfe"),h=Object(a["a"])("swipe"),u=h[0],l=h[1];e["a"]=u({mixins:[s["a"],Object(o["a"])(function(t,e){t(window,"resize",this.onResize,!0),e?this.initialize():this.clear()})],props:{width:Number,height:Number,autoplay:Number,vertical:Boolean,indicatorColor:String,loop:{type:Boolean,default:!0},duration:{type:Number,default:500},touchable:{type:Boolean,default:!0},initialSwipe:{type:Number,default:0},showIndicators:{type:Boolean,default:!0}},data:function(){return{computedWidth:0,computedHeight:0,offset:0,active:0,deltaX:0,deltaY:0,swipes:[],swiping:!1}},watch:{swipes:function(){this.initialize()},initialSwipe:function(){this.initialize()},autoplay:function(t){t?this.autoPlay():this.clear()}},computed:{count:function(){return this.swipes.length},delta:function(){return this.vertical?this.deltaY:this.deltaX},size:function(){return this[this.vertical?"computedHeight":"computedWidth"]},trackSize:function(){return this.count*this.size},activeIndicator:function(){return(this.active+this.count)%this.count},isCorrectDirection:function(){var t=this.vertical?"vertical":"horizontal";return this.direction===t},trackStyle:function(){var t,e=this.vertical?"height":"width",i=this.vertical?"width":"height";return t={},t[e]=this.trackSize+"px",t[i]=this[i]?this[i]+"px":"",t.transitionDuration=(this.swiping?0:this.duration)+"ms",t.transform="translate"+(this.vertical?"Y":"X")+"("+this.offset+"px)",t},indicatorStyle:function(){return{backgroundColor:this.indicatorColor}},minOffset:function(){var t=this.$el.getBoundingClientRect();return(this.vertical?t.height:t.width)-this.size*this.count}},methods:{initialize:function(t){if(void 0===t&&(t=this.initialSwipe),clearTimeout(this.timer),this.$el){var e=this.$el.getBoundingClientRect();this.computedWidth=this.width||e.width,this.computedHeight=this.height||e.height}this.swiping=!0,this.active=t,this.offset=this.count>1?-this.size*this.active:0,this.swipes.forEach(function(t){t.offset=0}),this.autoPlay()},onResize:function(){this.initialize(this.activeIndicator)},onTouchStart:function(t){this.touchable&&(this.clear(),this.swiping=!0,this.touchStart(t),this.correctPosition())},onTouchMove:function(t){this.touchable&&this.swiping&&(this.touchMove(t),this.isCorrectDirection&&(Object(n["c"])(t,!0),this.move({offset:this.delta})))},onTouchEnd:function(){if(this.touchable&&this.swiping){if(this.delta&&this.isCorrectDirection){var t=this.vertical?this.offsetY:this.offsetX;this.move({pace:t>0?this.delta>0?-1:1:0,emitChange:!0})}this.swiping=!1,this.autoPlay()}},getTargetActive:function(t){var e=this.active,i=this.count;return t?this.loop?Object(c["a"])(e+t,-1,i):Object(c["a"])(e+t,0,i-1):e},getTargetOffset:function(t,e){var i=t*this.size;this.loop||(i=Math.min(i,-this.minOffset));var a=Math.round(e-i);return this.loop||(a=Object(c["a"])(a,this.minOffset,0)),a},move:function(t){var e=t.pace,i=void 0===e?0:e,a=t.offset,n=void 0===a?0:a,s=t.emitChange,o=this.loop,r=this.count,c=this.active,h=this.swipes,u=this.trackSize,l=this.minOffset;if(!(r<=1)){var d=this.getTargetActive(i),f=this.getTargetOffset(d,n);if(o){if(h[0]){var m=f<l;h[0].offset=m?u:0}if(h[r-1]){var p=f>0;h[r-1].offset=p?-u:0}}this.active=d,this.offset=f,s&&d!==c&&this.$emit("change",this.activeIndicator)}},swipeTo:function(t,e){var i=this;void 0===e&&(e={}),this.swiping=!0,this.resetTouchStatus(),this.correctPosition(),Object(r["b"])(function(){i.move({pace:t%i.count-i.active,emitChange:!0}),e.immediate?Object(r["b"])(function(){i.swiping=!1}):i.swiping=!1})},correctPosition:function(){this.active<=-1&&this.move({pace:this.count}),this.active>=this.count&&this.move({pace:-this.count})},clear:function(){clearTimeout(this.timer)},autoPlay:function(){var t=this,e=this.autoplay;e&&this.count>1&&(this.clear(),this.timer=setTimeout(function(){t.swiping=!0,t.resetTouchStatus(),t.correctPosition(),Object(r["b"])(function(){t.swiping=!1,t.move({pace:1,emitChange:!0}),t.autoPlay()})},e))},renderIndicator:function(){var t=this,e=this.$createElement,i=this.count,a=this.activeIndicator,n=this.slots("indicator");return n||(this.showIndicators&&i>1?e("div",{class:l("indicators",{vertical:this.vertical})},[Array.apply(void 0,Array(i)).map(function(i,n){return e("i",{class:l("indicator",{active:n===a}),style:n===a?t.indicatorStyle:null})})]):void 0)}},render:function(){var t=arguments[0];return t("div",{class:l()},[t("div",{ref:"track",style:this.trackStyle,class:l("track"),on:{touchstart:this.onTouchStart,touchmove:this.onTouchMove,touchend:this.onTouchEnd,touchcancel:this.onTouchEnd}},[this.slots()]),this.renderIndicator()])}})},"9cd6":function(t,e,i){"use strict";(function(t){i.d(e,"c",function(){return h}),i.d(e,"b",function(){return u}),i.d(e,"a",function(){return l});var a=i("46c5"),n=Date.now();function s(t){var e=Date.now(),i=Math.max(0,16-(e-n)),a=setTimeout(t,i);return n=e+i,a}var o=a["d"]?t:window,r=o.requestAnimationFrame||s,c=o.cancelAnimationFrame||o.clearTimeout;function h(t){return r.call(o,t)}function u(t){h(function(){h(t)})}function l(t){c.call(o,t)}}).call(this,i("66fa"))},b044:function(t,e,i){},b20f:function(t,e,i){},cfd9:function(t,e,i){},e4cc:function(t,e,i){"use strict";var a=i("f9c5"),n=i("40c3"),s=Object(n["a"])("swipe-item"),o=s[0],r=s[1];e["a"]=o({data:function(){return{offset:0}},beforeCreate:function(){this.$parent.swipes.push(this)},destroyed:function(){this.$parent.swipes.splice(this.$parent.swipes.indexOf(this),1)},render:function(){var t=arguments[0],e=this.$parent,i=e.vertical,n=e.computedWidth,s=e.computedHeight,o={width:n+"px",height:i?s+"px":"100%",transform:"translate"+(i?"Y":"X")+"("+this.offset+"px)"};return t("div",{class:r(),style:o,on:Object(a["a"])({},this.$listeners)},[this.slots()])}})}}]);